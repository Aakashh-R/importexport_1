import{r as e,a as t,b as s,u as a,L as l,c as n,N as i,R as r,d,e as c,B as o}from"./vendor-BTgbBcA_.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var m={exports:{}},x={},p=e,h=Symbol.for("react.element"),u=Symbol.for("react.fragment"),g=Object.prototype.hasOwnProperty,b=p.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,j={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,s){var a,l={},n=null,i=null;for(a in void 0!==s&&(n=""+s),void 0!==t.key&&(n=""+t.key),void 0!==t.ref&&(i=t.ref),t)g.call(t,a)&&!j.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===l[a]&&(l[a]=t[a]);return{$$typeof:h,type:e,key:n,ref:i,props:l,_owner:b.current}}x.Fragment=u,x.jsx=N,x.jsxs=N,m.exports=x;var f=m.exports,v={},y=t;v.createRoot=y.createRoot,v.hydrateRoot=y.hydrateRoot;const w="http://localhost:5001".replace(/\/$/,"")+"/api",C=s.create({baseURL:w}),k={Factory:{"Company Owner":"/factory/company-owner",Admin:"/factory/admin"},Shipper:{"Company Owner":"/shipper/company-owner",Admin:"/shipper/admin","Documentation Department":"/shipper/documentation","Logistics Department":"/shipper/logistics","Accounts Department":"/shipper/accounts","Office Boy":"/shipper/office-boy","Stone Marker":"/shipper/stone-marker"},Transporter:{"Company Owner":"/transporter/company-owner",Admin:"/transporter/admin","Truck Driver":"/transporter/truck-driver"},"Clearance Agent":{"Company Owner":"/clearance-agents/company-owner",Admin:"/clearance-agents/admin","Documentation Department":"/clearance-agents/documentation","Logistics Department":"/clearance-agents/logistics","Accounts Department":"/clearance-agents/accounts","Office Boy":"/clearance-agents/office-boy"}};var S={};const R="undefined"!=typeof process&&S&&S.VITE_API_BASE_URL||void 0!==import.meta&&{BASE_URL:"/importexport_1",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://localhost:5001",VITE_SENDGRID_FROM:"Docs System <fromexpo@gmail.com>"}&&"http://localhost:5001"||"http://localhost:5001";function L(e){return e?{Authorization:`Bearer ${e}`}:{}}async function O(e){const t=await e.text();try{return{status:e.status,body:JSON.parse(t)}}catch{return{status:e.status,body:t}}}async function D(e,t={},s){return O(await fetch(`${R}${e}`,{method:"POST",headers:{"Content-Type":"application/json",...L(s)},body:JSON.stringify(t),credentials:"include"}))}async function P(e,t){return O(await fetch(`${R}${e}`,{method:"GET",headers:{...L(t)},credentials:"include"}))}const A=e.createContext();const I={shipper:["shipper","shp","shipping","shipping_staff","shipper_user"],admin:["admin","administrator","superadmin"],viewer:["viewer","read-only","readonly"]};function T(e,t){const s=function(e){return e?String(e).trim().toLowerCase():""}(e);if(!s)return!1;const a={shipper:["use_templates","send_docs","export_docs"],admin:["use_templates","send_docs","export_docs","manage_templates"],viewer:["use_templates"]};for(const[l,n]of Object.entries(I))if(n.includes(s))return(a[l]||[]).includes(t);return!!a[s]&&a[s].includes(t)}const E=({children:t})=>{const[s,a]=e.useState(()=>{try{return JSON.parse(localStorage.getItem("user"))||null}catch{return null}}),[l,n]=e.useState(()=>localStorage.getItem("token")||null),[i,r]=e.useState(!1);e.useEffect(()=>{s?localStorage.setItem("user",JSON.stringify(s)):localStorage.removeItem("user")},[s]),e.useEffect(()=>{l?localStorage.setItem("token",l):localStorage.removeItem("token")},[l]);const d=e.useCallback(async e=>{r(!0);try{const t=await D("/auth/login",e);if(null==t?void 0:t.token)if(n(t.token),t.user)a(t.user);else{const e=function(e){try{const t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(atob(t))}catch(t){return null}}(t.token);e&&a(e)}return r(!1),t}catch(t){throw r(!1),t}},[]),c=e.useCallback(()=>{a(null),n(null),localStorage.removeItem("user"),localStorage.removeItem("token")},[]),o=e.useCallback(async()=>{try{const e=await P("/auth/refresh");return(null==e?void 0:e.token)&&n(e.token),e}catch(e){throw c(),e}},[c]),m=e.useCallback((e,t)=>{if(e){if(e&&"object"==typeof e&&e.user&&e.token)return a(e.user),void n(e.token);a(e),t&&n(t)}},[]),x=e.useCallback(e=>!!s&&(Array.isArray(s.roles)?s.roles.some(t=>T(t,e)):T(s.role||(null==s?void 0:s.roleName),e)),[s]),p={user:s,setUser:a,token:l,setToken:n,loadingProfile:i,signIn:d,signOut:c,refreshToken:o,hasPermission:x,DEFAULT_SENDGRID_FROM:"Docs System <fromexpo@gmail.com>",login:m};return f.jsx(A.Provider,{value:p,children:t})},U=[{name:"Factory",roles:["Company Owner","Admin"]},{name:"Shipper",roles:["Company Owner","Admin","Documentation Department","Accounts Department"]},{name:"Transporter",roles:["Company Owner","Admin","Truck Driver"]},{name:"Clearance Agent",roles:["Company Owner","Admin","Documentation Department","Accounts Department"]}];function M(){const{login:t}=e.useContext(A),s=a(),[n,i]=e.useState({name:"",email:"",password:"",companyName:"",role:""}),[r,d]=e.useState(U),[c,o]=e.useState(!1),m=e.useMemo(()=>r.find(e=>e.name===n.companyName),[r,n.companyName]);e.useEffect(()=>{console.log("Signup component mounted (debug)",{env:"production"})},[]),e.useEffect(()=>{let e=!0;return async function(){try{const t="http://localhost:5001",s=t?`${t.replace(/\/$/,"")}/api/data/roles`:"/api/data/roles",a=await fetch(s),l=await a.json();if(!e)return;(null==l?void 0:l.ok)&&Array.isArray(l.companies)&&d(l.companies)}catch(t){console.error("Failed to load companies/roles from backend:",t)}}(),()=>e=!1},[]);const x=e=>i(t=>({...t,[e.target.name]:e.target.value}));return f.jsx("div",{className:"flex items-center justify-center min-h-screen",children:f.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl w-full max-w-md",children:[f.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Create Your TriConnect Account"}),f.jsxs("form",{onSubmit:async e=>{var a,l,i,r;e.preventDefault(),o(!0);try{const e=await(r={name:n.name,email:n.email,password:n.password,companyName:n.companyName,role:n.role},C.post("/auth/register",r).then(e=>e.data));console.log("signup response user:",e.user),t(e.user,e.token);const l=null==(a=k[e.user.companyName])?void 0:a[e.user.role];console.log(l),s(l||"/")}catch(d){alert((null==(i=null==(l=null==d?void 0:d.response)?void 0:l.data)?void 0:i.message)||"Signup failed"),console.error(d)}finally{o(!1)}},className:"space-y-4",children:[f.jsx("input",{name:"name",value:n.name,onChange:x,required:!0,placeholder:"Full Name",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"}),f.jsx("input",{name:"email",value:n.email,onChange:x,required:!0,type:"email",placeholder:"Email",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"}),f.jsx("input",{name:"password",value:n.password,onChange:x,required:!0,type:"password",placeholder:"Password",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"}),f.jsxs("select",{name:"companyName",value:n.companyName,onChange:x,required:!0,className:"w-full p-3 border rounded-lg bg-white focus:ring-2 focus:ring-indigo-500 outline-none",children:[f.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select Company"}),r.map((e,t)=>f.jsx("option",{value:e.name,children:e.name},t))]}),m&&f.jsxs("select",{name:"role",value:n.role,onChange:x,required:!0,className:"w-full p-3 border rounded-lg bg-white focus:ring-2 focus:ring-indigo-500 outline-none",children:[f.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select Role"}),m.roles.map((e,t)=>f.jsx("option",{value:e,children:e},t))]}),f.jsx("button",{type:"submit",disabled:c,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-lg font-semibold transition duration-200",children:c?"Creating...":"Sign Up"})]}),f.jsxs("p",{className:"text-center text-sm mt-4",children:["Already have an account? ",f.jsx(l,{to:"/login",className:"text-indigo-600 hover:underline",children:"Login"})]})]})})}function B(){const{login:t}=e.useContext(A),s=a(),[n,i]=e.useState({email:"",password:""}),[r,d]=e.useState(!1),c=e=>i(t=>({...t,[e.target.name]:e.target.value}));return f.jsx("div",{className:"flex items-center justify-center min-h-screen",children:f.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl w-full max-w-md",children:[f.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Login to TriConnect"}),f.jsxs("form",{onSubmit:async e=>{var a,l,i,r;e.preventDefault(),d(!0);try{const e=await(r={email:n.email,password:n.password},C.post("/auth/login",r).then(e=>e.data));t(e.user,e.token);const l=null==(a=k[e.user.companyName])?void 0:a[e.user.role];s(l||"/")}catch(c){alert((null==(i=null==(l=null==c?void 0:c.response)?void 0:l.data)?void 0:i.message)||"Login failed"),console.error(c)}finally{d(!1)}},className:"space-y-4",children:[f.jsx("input",{name:"email",value:n.email,onChange:c,required:!0,type:"email",placeholder:"Email",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"}),f.jsx("input",{name:"password",value:n.password,onChange:c,required:!0,type:"password",placeholder:"Password",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"}),f.jsx("button",{type:"submit",disabled:r,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-lg font-semibold transition duration-200",children:r?"Logging in...":"Login"})]}),f.jsxs("p",{className:"text-center text-sm mt-4",children:["Don't have an account? ",f.jsx(l,{to:"/signup",className:"text-indigo-600 hover:underline",children:"Sign up"})]})]})})}const $=({children:t,allowedCompany:s,allowedRole:a})=>{const{user:l}=e.useContext(A),r=n();return l?s&&a&&(l.companyName!==s||l.role!==a)?f.jsx("div",{className:"p-6",children:"Unauthorized — you don't have access to this page."}):t:f.jsx(i,{to:"/login",state:{from:r},replace:!0})},_={strategy:{id:"strategy",title:"Plant Strategy",short:"Capacity planning, expansion and lane strategy"},production:{id:"production",title:"Production Oversight",short:"High-level production KPIs and bottlenecks"},capex:{id:"capex",title:"CapEx & Assets",short:"Approve capital spend and asset lifecycle"},finance:{id:"finance",title:"Finance & P&L",short:"Margins, budgeting and cash approvals"},procurement:{id:"procurement",title:"Procurement",short:"Raw material contracts and vendor strategy"},quality:{id:"quality",title:"Quality & Compliance",short:"Quality targets, audits and compliance"},people:{id:"people",title:"People & HR",short:"Senior hires, policies and retention"},safety:{id:"safety",title:"Safety & Environment",short:"EHS programs and incident oversight"},reports:{id:"reports",title:"Reports & Governance",short:"Board reports, audits and KPI exports"}},F={oee:72,yieldPct:98.2,downtimeHrs:12,monthRevenue:52e5};function H(){const t=a(),[s,l]=e.useState("strategy"),[n,i]=e.useState(""),[r,d]=e.useState(null),[c,o]=e.useState(1),m=e.useMemo(()=>Object.values(_),[]),x=e.useMemo(()=>{const e=n.trim().toLowerCase();return e?m.filter(t=>t.title.toLowerCase().includes(e)||t.short.toLowerCase().includes(e)):m},[n,m]),p=Math.max(1,Math.ceil(x.length/6)),h=x.slice(6*(c-1),6*c);function u(){const e=Object.values(_).map(e=>`- ${e.title}: ${e.short}`).join("\n"),t=new Blob([`Factory Owner Dashboard Specification\n\n${e}`],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="factory_owner_spec.txt",document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(s)}return f.jsxs("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-6 lg:p-10",children:[f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("header",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[f.jsx("div",{children:f.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-slate-800",children:"Factory — Company Owner"})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:u,className:"px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm",children:"Specification"}),f.jsx("button",{onClick:()=>t("/signup"),className:"px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm",children:"Home"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[f.jsxs("aside",{className:"lg:col-span-1 space-y-4",children:[f.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-slate-100",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-slate-500",children:"OEE"}),f.jsxs("div",{className:"text-2xl font-semibold mt-1",children:[F.oee,"%"]})]}),f.jsxs("div",{className:"text-sm text-slate-500",children:[f.jsx("div",{children:"Yield"}),f.jsxs("div",{className:"font-medium mt-1",children:[F.yieldPct,"%"]})]})]}),f.jsxs("div",{className:"mt-4 text-xs text-slate-500",children:["Downtime: ",f.jsxs("span",{className:"font-medium",children:[F.downtimeHrs," hrs"]})]}),f.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Revenue:"," ",f.jsxs("span",{className:"font-medium",children:["₹ ",F.monthRevenue.toLocaleString()]})]})]}),f.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-slate-100",children:[f.jsx("h3",{className:"text-sm font-medium text-slate-800",children:"Owner Actions"}),f.jsxs("div",{className:"mt-3 flex flex-col gap-2",children:[f.jsx("button",{onClick:()=>l("capex"),className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm text-left",children:"Review CapEx"}),f.jsx("button",{onClick:()=>l("finance"),className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm text-left",children:"Open P&L"}),f.jsx("button",{onClick:()=>l("strategy"),className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm text-left",children:"Strategy"})]})]})]}),f.jsxs("main",{className:"lg:col-span-2 space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"flex-1",children:f.jsx("input",{value:n,onChange:e=>{i(e.target.value),o(1)},placeholder:"Search features...",className:"w-full px-4 py-3 rounded-xl border border-slate-200 bg-white shadow-sm focus:outline-none"})}),f.jsxs("div",{className:"ml-4 hidden sm:block text-sm text-slate-500",children:["Showing ",x.length," items"]})]}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:h.map(e=>f.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-slate-100 flex flex-col",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-lg font-medium text-slate-800",children:e.title}),f.jsx("p",{className:"text-sm text-slate-500 mt-2",children:e.short})]}),f.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[f.jsx("button",{onClick:()=>d(e),className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm",children:"Open"}),f.jsx("button",{onClick:()=>{const t=new Blob([`${e.title}\n\n${e.short}`],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`${e.id}_spec.txt`,document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(s)},className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Download"}),f.jsxs("span",{className:"ml-auto text-xs text-slate-400",children:["#",e.id]})]})]},e.id))}),f.jsxs("div",{className:"flex items-center justify-between mt-2",children:[f.jsxs("div",{className:"text-sm text-slate-500",children:["Page ",c," of ",p]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>o(e=>Math.max(1,e-1)),className:"px-3 py-1 rounded-xl bg-white border border-slate-200",children:"Prev"}),f.jsx("button",{onClick:()=>o(e=>Math.min(p,e+1)),className:"px-3 py-1 rounded-xl bg-white border border-slate-200",children:"Next"})]})]})]})]})]}),r&&f.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[f.jsx("div",{onClick:()=>d(null),className:"absolute inset-0 bg-black/40"}),f.jsx("div",{className:"relative w-full sm:max-w-2xl mx-4 sm:mx-0 bg-white rounded-t-2xl sm:rounded-2xl shadow-lg overflow-auto",style:{maxHeight:"90vh"},children:f.jsxs("div",{className:"p-4 sm:p-6",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:r.title}),f.jsx("p",{className:"text-sm text-slate-500 mt-1",children:r.short})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>t("/signup"),className:"px-3 py-2 rounded-lg bg-white border border-slate-200 text-sm",children:"Home"}),f.jsx("button",{onClick:()=>d(null),className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Close"})]})]}),f.jsxs("div",{className:"mt-4 text-sm text-slate-600",children:[f.jsx("p",{children:r.short}),f.jsx("div",{className:"mt-3 text-xs text-slate-500",children:"Owner-level actions include approvals, KPI review and governance tasks."})]}),f.jsxs("div",{className:"mt-6 flex gap-2",children:[f.jsx("button",{onClick:u,className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"Export Spec"}),f.jsx("button",{onClick:()=>d(null),className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Close"})]})]})})]})]})}const G={production:{id:"production",title:"Production Orders",short:"Manage production runs and schedules"},inventory:{id:"inventory",title:"Inventory",short:"Raw materials, WIP and finished goods"},maintenance:{id:"maintenance",title:"Maintenance",short:"Machine maintenance and service logs"},quality:{id:"quality",title:"Quality Control",short:"Inspections, QC checks and NCRs"},workers:{id:"workers",title:"Workers",short:"Staff roster, attendance and certifications"},reports:{id:"reports",title:"Reports",short:"Production, quality and downtime reports"},settings:{id:"settings",title:"Settings",short:"Site settings, shifts and integrations"}},V=Array.from({length:14}).map((e,t)=>({id:`MC-${800+t}`,name:["Press A","Cutter B","Welder C","Painter D"][t%4],status:t%6==0?"Down":t%4==0?"Maintenance":"Running",lastService:"2025-11-"+(t%25+1)}));function W(){const t=a(),[s,l]=e.useState("production"),[n,i]=e.useState(""),[r,d]=e.useState(null),[c,o]=e.useState(1),m=e.useMemo(()=>Object.values(G),[]),x=e.useMemo(()=>{const e=n.trim().toLowerCase();return e?m.filter(t=>t.title.toLowerCase().includes(e)||t.short.toLowerCase().includes(e)):m},[n,m]),p=e.useMemo(()=>{const e=n.trim().toLowerCase();return e?V.filter(t=>t.id.toLowerCase().includes(e)||t.name.toLowerCase().includes(e)||t.status.toLowerCase().includes(e)):V},[n]),h=Math.max(1,Math.ceil(("maintenance"===s?p.length:x.length)/8)),u=("maintenance"===s?p:x).slice(8*(c-1),8*c);function g(){const e=Object.values(G).map(e=>`- ${e.title}: ${e.short}`).join("\n"),t=new Blob([`Factory Admin Specification\n\n${e}`],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="factory_admin_spec.txt",document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(s)}return f.jsxs("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-6 lg:p-10",children:[f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsxs("header",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[f.jsx("div",{children:f.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-slate-800",children:"Factory Admin"})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{value:n,onChange:e=>{i(e.target.value),o(1)},placeholder:"Search features, machines, ids...",className:"px-3 py-2 rounded-xl border border-slate-200 bg-white shadow-sm w-56 sm:w-72 focus:outline-none"}),f.jsx("button",{onClick:g,className:"px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm",children:"Specification"}),f.jsx("button",{onClick:()=>t("/signup"),className:"px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm",children:"Home"}),f.jsx("button",{onClick:()=>{"maintenance"===s?function(e,t,s){const a=[t.join(","),...e.map(e=>t.map(t=>e[t]??"").join(","))].join("\n"),l=new Blob([a],{type:"text/csv;charset=utf-8"}),n=URL.createObjectURL(l),i=document.createElement("a");i.href=n,i.download=s,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(n)}(p,["id","name","status","lastService"],"machines.csv"):g()},className:"px-3 py-2 rounded-xl bg-indigo-600 text-white text-sm",children:"Export"})]})]}),f.jsx("nav",{className:"mb-6",children:f.jsx("div",{className:"flex flex-wrap gap-3",children:Object.values(G).map(e=>f.jsx("button",{onClick:()=>{l(e.id),o(1)},className:"px-3 py-2 rounded-xl text-sm "+(s===e.id?"bg-indigo-600 text-white":"bg-white text-slate-700 border border-slate-200"),children:e.title},e.id))})}),f.jsxs("section",{children:["production"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800",children:"Production Orders"}),f.jsx("div",{className:"text-sm text-slate-500",children:"Manage schedules and priorities"})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Running Orders"}),f.jsx("div",{className:"text-2xl font-semibold mt-2",children:"18"})]}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Planned Orders"}),f.jsx("div",{className:"text-2xl font-semibold mt-2",children:"24"})]}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Blocked"}),f.jsx("div",{className:"text-2xl font-semibold mt-2",children:"2"})]})]})]}),"inventory"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800",children:"Inventory"}),f.jsx("div",{className:"text-sm text-slate-500",children:"Raw materials and WIP"})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Raw Material Value"}),f.jsx("div",{className:"text-2xl font-semibold mt-2",children:"₹ 2,480,000"})]}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"WIP"}),f.jsx("div",{className:"text-2xl font-semibold mt-2",children:"1,120 units"})]})]})]}),"maintenance"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800",children:"Maintenance"}),f.jsx("div",{className:"text-sm text-slate-500",children:"Machine status and service logs"})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"text-xs text-slate-500 uppercase",children:[f.jsx("th",{className:"px-3 py-2",children:"ID"}),f.jsx("th",{className:"px-3 py-2",children:"Machine"}),f.jsx("th",{className:"px-3 py-2",children:"Status"}),f.jsx("th",{className:"px-3 py-2",children:"Last Service"}),f.jsx("th",{className:"px-3 py-2"})]})}),f.jsx("tbody",{children:u.map(e=>f.jsxs("tr",{className:"border-t",children:[f.jsx("td",{className:"px-3 py-3 text-sm text-slate-700",children:e.id}),f.jsx("td",{className:"px-3 py-3 text-sm text-slate-700",children:e.name}),f.jsx("td",{className:"px-3 py-3 text-sm",children:f.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("Running"===e.status?"bg-green-100 text-green-800":"Maintenance"===e.status?"bg-amber-100 text-amber-800":"bg-rose-100 text-rose-700"),children:e.status})}),f.jsx("td",{className:"px-3 py-3 text-sm text-slate-500",children:e.lastService}),f.jsx("td",{className:"px-3 py-3 text-right",children:f.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[f.jsx("button",{onClick:()=>d(e),className:"text-sm px-2 py-1 rounded-lg bg-indigo-50 text-indigo-700",children:"View"}),f.jsx("button",{onClick:()=>alert("Create maintenance work order"),className:"text-sm px-2 py-1 rounded-lg bg-slate-100 text-slate-700",children:"Work Order"})]})})]},e.id))})]})}),f.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[f.jsxs("div",{className:"text-sm text-slate-500",children:["Page ",c," of ",h]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>o(e=>Math.max(1,e-1)),className:"px-3 py-1 rounded-xl bg-white border border-slate-200",children:"Prev"}),f.jsx("button",{onClick:()=>o(e=>Math.min(h,e+1)),className:"px-3 py-1 rounded-xl bg-white border border-slate-200",children:"Next"})]})]})]}),"quality"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Quality Control"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Inspections and NCR tracking."}),f.jsx("div",{className:"space-y-3",children:f.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm font-medium",children:"Last inspection: 2025-11-14"}),f.jsx("div",{className:"text-xs text-slate-500",children:"Open NCRs: 3"})]})})]}),"workers"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Workers"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Rosters, attendance and certifications."}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"On Duty"}),f.jsx("div",{className:"text-2xl font-semibold mt-2",children:"128"})]}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Cert Expiring"}),f.jsx("div",{className:"text-2xl font-semibold mt-2",children:"6"})]})]})]}),"reports"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Reports"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Export production and downtime reports."}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"Production Report"}),f.jsx("button",{className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Downtime Report"})]})]}),"settings"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Settings"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Shift patterns, integrations and site config."}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl",children:[f.jsx("input",{type:"checkbox",defaultChecked:!0}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium",children:"Enable Auto Scheduling"}),f.jsx("div",{className:"text-xs text-slate-500",children:"Auto-assign production based on capacity"})]})]}),f.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl",children:[f.jsx("input",{type:"checkbox"}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium",children:"Enable IoT Telemetry"}),f.jsx("div",{className:"text-xs text-slate-500",children:"Collect machine metrics"})]})]})]})]})]})]}),r&&f.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[f.jsx("div",{onClick:()=>d(null),className:"absolute inset-0 bg-black/40"}),f.jsx("div",{className:"relative w-full sm:max-w-lg mx-4 sm:mx-0 bg-white rounded-t-2xl sm:rounded-2xl shadow-lg overflow-auto",style:{maxHeight:"90vh"},children:f.jsxs("div",{className:"p-4 sm:p-6",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:r.name}),f.jsx("p",{className:"text-sm text-slate-500 mt-1",children:r.id})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>t("/signup"),className:"px-3 py-2 rounded-lg bg-white border border-slate-200 text-sm",children:"Home"}),f.jsx("button",{onClick:()=>d(null),className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Close"})]})]}),f.jsxs("div",{className:"mt-4 text-sm text-slate-600",children:[f.jsxs("div",{className:"mb-2",children:["Status: ",f.jsx("span",{className:"font-medium",children:r.status})]}),f.jsxs("div",{className:"mb-2",children:["Last Service: ",f.jsx("span",{className:"font-medium",children:r.lastService})]}),f.jsx("div",{className:"mt-3 text-xs text-slate-500",children:"Use the Work Order action to schedule service or mark as serviced."})]}),f.jsxs("div",{className:"mt-6 flex gap-2",children:[f.jsx("button",{onClick:()=>alert("Create work order - implement API"),className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"Work Order"}),f.jsx("button",{onClick:()=>d(null),className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Close"})]})]})})]})]})}const q={strategy:{id:"strategy",title:"Business Strategy",short:"Set growth targets, new markets and lane strategy"},commercial:{id:"commercial",title:"Key Accounts",short:"Manage top customers, contracts and SLAs"},finance:{id:"finance",title:"Finance & P&L",short:"Margins, credit policy, cash planning"},operations:{id:"operations",title:"Operations Oversight",short:"Monitor deliveries, capacity and KPIs"},fleet:{id:"fleet",title:"Fleet Strategy",short:"Procurement, leasing and utilization"},compliance:{id:"compliance",title:"Compliance & Risk",short:"Regulatory, customs and insurance"},people:{id:"people",title:"People & HR",short:"Senior hires, incentives and retention"},tech:{id:"tech",title:"Technology",short:"TMS, telematics and dashboards"},reports:{id:"reports",title:"Reports & Governance",short:"Board reports, audits and KPI exports"}},K={onTimePct:93,utilizationPct:78,outstandingReceivables:124e4,monthRevenue:348e4};function z(){const t=a(),[s,l]=e.useState("strategy"),[n,i]=e.useState(""),[r,d]=e.useState(null),[c,o]=e.useState(1),m=e.useMemo(()=>Object.values(q),[]),x=e.useMemo(()=>{const e=n.trim().toLowerCase();return e?m.filter(t=>t.title.toLowerCase().includes(e)||t.short.toLowerCase().includes(e)):m},[n,m]),p=Math.max(1,Math.ceil(x.length/6)),h=x.slice(6*(c-1),6*c);function u(){const e=Object.values(q).map(e=>`- ${e.title}: ${e.short}`).join("\n"),t=new Blob([`Shipper Owner Dashboard Specification\n\n${e}`],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="shipper_owner_spec.txt",document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(s)}return f.jsxs("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-6 lg:p-10",children:[f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("header",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[f.jsx("div",{children:f.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-slate-800",children:"Shipper — Company Owner"})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("div",{className:"hidden sm:flex flex-col text-right mr-2",children:[f.jsx("div",{className:"text-xs text-slate-500",children:"Specification"}),f.jsx("div",{className:"text-sm text-slate-700 font-medium",children:"Top-right actions"})]}),f.jsx("button",{onClick:()=>u(),className:"px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm",children:"Specification"}),f.jsx("button",{onClick:()=>t("/signup"),className:"px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm",children:"Home"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[f.jsxs("aside",{className:"lg:col-span-1 space-y-4",children:[f.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-slate-100",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-slate-500",children:"On-time delivery"}),f.jsxs("div",{className:"text-2xl font-semibold mt-1",children:[K.onTimePct,"%"]})]}),f.jsxs("div",{className:"text-sm text-slate-500",children:[f.jsx("div",{children:"Utilization"}),f.jsxs("div",{className:"font-medium mt-1",children:[K.utilizationPct,"%"]})]})]}),f.jsxs("div",{className:"mt-4 text-xs text-slate-500",children:["Revenue (M):"," ",f.jsxs("span",{className:"font-medium",children:["₹ ",(K.monthRevenue/1e5).toFixed(1),"L"]})]}),f.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Receivables:"," ",f.jsxs("span",{className:"font-medium",children:["₹ ",K.outstandingReceivables.toLocaleString()]})]})]}),f.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-slate-100",children:[f.jsx("div",{className:"flex items-center justify-between mb-2",children:f.jsx("h3",{className:"text-sm font-medium text-slate-800",children:"Quick Actions"})}),f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsx("button",{onClick:()=>l("commercial"),className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm text-left",children:"Open Key Accounts"}),f.jsx("button",{onClick:()=>l("finance"),className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm text-left",children:"Open P&L"}),f.jsx("button",{onClick:()=>l("operations"),className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm text-left",children:"Open Operations"})]})]})]}),f.jsxs("main",{className:"lg:col-span-2 space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"flex-1",children:f.jsx("input",{value:n,onChange:e=>{i(e.target.value),o(1)},placeholder:"Search features...",className:"w-full px-4 py-3 rounded-xl border border-slate-200 bg-white shadow-sm focus:outline-none"})}),f.jsxs("div",{className:"ml-4 hidden sm:block text-sm text-slate-500",children:["Showing ",x.length," features"]})]}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:h.map(e=>f.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-slate-100 flex flex-col",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-lg font-medium text-slate-800",children:e.title}),f.jsx("p",{className:"text-sm text-slate-500 mt-2",children:e.short})]}),f.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[f.jsx("button",{onClick:()=>{d(e)},className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm",children:"Open"}),f.jsx("button",{onClick:()=>{const t=new Blob([`${e.title}\n\n${e.short}`],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`${e.id}_spec.txt`,document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(s)},className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Download"}),f.jsxs("span",{className:"ml-auto text-xs text-slate-400",children:["#",e.id]})]})]},e.id))}),f.jsxs("div",{className:"flex items-center justify-between mt-2",children:[f.jsxs("div",{className:"text-sm text-slate-500",children:["Page ",c," of ",p]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>o(e=>Math.max(1,e-1)),className:"px-3 py-1 rounded-xl bg-white border border-slate-200",children:"Prev"}),f.jsx("button",{onClick:()=>o(e=>Math.min(p,e+1)),className:"px-3 py-1 rounded-xl bg-white border border-slate-200",children:"Next"})]})]})]})]})]}),r&&f.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[f.jsx("div",{onClick:()=>d(null),className:"absolute inset-0 bg-black/40"}),f.jsx("div",{className:"relative w-full sm:max-w-2xl mx-4 sm:mx-0 bg-white rounded-t-2xl sm:rounded-2xl shadow-lg overflow-auto",style:{maxHeight:"90vh"},children:f.jsxs("div",{className:"p-4 sm:p-6",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:r.title}),f.jsx("p",{className:"text-sm text-slate-500 mt-1",children:r.short})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>t("/signup"),className:"px-3 py-2 rounded-lg bg-white border border-slate-200 text-sm",children:"Home"}),f.jsx("button",{onClick:()=>d(null),className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Close"})]})]}),f.jsxs("div",{className:"mt-4 text-sm text-slate-600",children:[f.jsx("p",{children:r.short}),f.jsx("div",{className:"mt-3 text-xs text-slate-500",children:"Use owner controls to review KPIs, sign contracts, and approve major spend."})]}),f.jsxs("div",{className:"mt-6 flex gap-2",children:[f.jsx("button",{onClick:()=>u(),className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"Export Spec"}),f.jsx("button",{onClick:()=>d(null),className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Close"})]})]})})]})]})}const Q={shipments:{id:"shipments",title:"Shipments",short:"Manage all shipments and statuses"},bookings:{id:"bookings",title:"Bookings",short:"Create and track bookings"},customers:{id:"customers",title:"Customers",short:"Customer list and account details"},rates:{id:"rates",title:"Rate Cards",short:"Manage rates and contracts"},billing:{id:"billing",title:"Billing",short:"Invoices and payments"},reports:{id:"reports",title:"Reports",short:"Operational and financial reports"},settings:{id:"settings",title:"Settings",short:"System settings and integrations"}},J=Array.from({length:20}).map((e,t)=>({id:`SHP-${5e3+t}`,origin:["Chennai","Mumbai","Kolkata","Delhi"][t%4],destination:["London","Dubai","Singapore","Sydney"][t%4],status:["Booked","In Transit","At Port","Delivered"][t%4],weight:50*(Math.floor(20*Math.random())+1)+" kg",eta:"2025-12-"+(t%28+1)})),Y=Array.from({length:12}).map((e,t)=>({id:`CUST-${300+t}`,name:["Global Exports","Oceanic Traders","RapidShip"][t%3],email:`contact${t+1}@example.com`,phone:`+91-9${Math.floor(1e8+9e8*Math.random())}`,status:t%4==0?"On hold":"Active"}));function X(){const[t,s]=e.useState("shipments"),[l,n]=e.useState(""),[i,r]=e.useState(null),[d,c]=e.useState(1),o=a(),m=e.useMemo(()=>{const e=l.trim().toLowerCase();return e?J.filter(t=>t.id.toLowerCase().includes(e)||t.origin.toLowerCase().includes(e)||t.destination.toLowerCase().includes(e)||t.status.toLowerCase().includes(e)):J},[l]),x=e.useMemo(()=>{const e=l.trim().toLowerCase();return e?Y.filter(t=>t.id.toLowerCase().includes(e)||t.name.toLowerCase().includes(e)||t.email.toLowerCase().includes(e)):Y},[l]),p=Math.max(1,Math.ceil(("customers"===t?x.length:m.length)/8)),h=("customers"===t?x:m).slice(8*(d-1),8*d);function u(e,t,s){const a=[t.join(","),...e.map(e=>t.map(t=>e[t]??"").join(","))].join("\n"),l=new Blob([a],{type:"text/csv;charset=utf-8"}),n=URL.createObjectURL(l),i=document.createElement("a");i.href=n,i.download=s,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(n)}return f.jsxs("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-6 lg:p-10",children:[f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsxs("header",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[f.jsx("div",{children:f.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-slate-800",children:"Shipper Admin"})}),f.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[f.jsx("input",{value:l,onChange:e=>{n(e.target.value),c(1)},placeholder:"Search shipments, customers, id...",className:"flex-1 sm:flex-none px-3 py-2 rounded-xl border border-slate-200 bg-white shadow-sm focus:outline-none"}),f.jsx("button",{onClick:()=>{"customers"===t?u(x,["id","name","email","phone","status"],"customers.csv"):u(m,["id","origin","destination","status","weight","eta"],"shipments.csv")},className:"px-3 py-2 rounded-xl bg-indigo-600 text-white text-sm ml-2",children:"Export CSV"}),f.jsx("button",{onClick:function(){const e=Object.values(Q).map(e=>`- ${e.title}: ${e.short}`).join("\n"),t=new Blob([`Shipper Admin Specification\n\n${e}`],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="shipper_admin_spec.txt",document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(s)},className:"px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm ml-2",children:"Specification"}),f.jsx("button",{onClick:()=>o("/signup"),className:"px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm ml-2",children:"Home"})]})]}),f.jsx("nav",{className:"mb-6",children:f.jsx("div",{className:"flex flex-wrap gap-3",children:Object.values(Q).map(e=>f.jsx("button",{onClick:()=>{s(e.id),c(1)},className:"px-3 py-2 rounded-xl text-sm "+(t===e.id?"bg-indigo-600 text-white":"bg-white text-slate-700 border border-slate-200"),children:e.title},e.id))})}),f.jsxs("section",{children:["shipments"===t&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800",children:"Shipments"}),f.jsxs("div",{className:"text-sm text-slate-500",children:["Total ",m.length]})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"text-xs text-slate-500 uppercase",children:[f.jsx("th",{className:"px-3 py-2",children:"ID"}),f.jsx("th",{className:"px-3 py-2",children:"Origin"}),f.jsx("th",{className:"px-3 py-2",children:"Destination"}),f.jsx("th",{className:"px-3 py-2",children:"Status"}),f.jsx("th",{className:"px-3 py-2",children:"Weight"}),f.jsx("th",{className:"px-3 py-2",children:"ETA"}),f.jsx("th",{className:"px-3 py-2"})]})}),f.jsx("tbody",{children:h.map(e=>f.jsxs("tr",{className:"border-t",children:[f.jsx("td",{className:"px-3 py-3 text-sm text-slate-700",children:e.id}),f.jsx("td",{className:"px-3 py-3 text-sm text-slate-700",children:e.origin}),f.jsx("td",{className:"px-3 py-3 text-sm text-slate-700",children:e.destination}),f.jsx("td",{className:"px-3 py-3 text-sm",children:f.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("Delivered"===e.status?"bg-green-100 text-green-800":"In Transit"===e.status?"bg-amber-100 text-amber-800":"bg-sky-100 text-sky-800"),children:e.status})}),f.jsx("td",{className:"px-3 py-3 text-sm text-slate-700",children:e.weight}),f.jsx("td",{className:"px-3 py-3 text-sm text-slate-500",children:e.eta}),f.jsx("td",{className:"px-3 py-3 text-right",children:f.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[f.jsx("button",{onClick:()=>r(e),className:"text-sm px-2 py-1 rounded-lg bg-indigo-50 text-indigo-700",children:"View"}),f.jsx("button",{onClick:()=>alert("Open tracking - implement API"),className:"text-sm px-2 py-1 rounded-lg bg-slate-100 text-slate-700",children:"Track"})]})})]},e.id))})]})}),f.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[f.jsxs("div",{className:"text-sm text-slate-500",children:["Page ",d," of ",p]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>c(e=>Math.max(1,e-1)),className:"px-3 py-1 rounded-xl bg-white border border-slate-200",children:"Prev"}),f.jsx("button",{onClick:()=>c(e=>Math.min(p,e+1)),className:"px-3 py-1 rounded-xl bg-white border border-slate-200",children:"Next"})]})]})]}),"bookings"===t&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Bookings"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Create a new booking or view recent bookings."}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Quick Booking"}),f.jsx("div",{className:"mt-2",children:f.jsx("button",{onClick:()=>alert("Open booking form"),className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"New Booking"})})]}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Recent Bookings"}),f.jsx("div",{className:"text-xs text-slate-600 mt-2",children:"No recent bookings"})]})]})]}),"customers"===t&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800",children:"Customers"}),f.jsxs("div",{className:"text-sm text-slate-500",children:["Total ",x.length]})]}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:h.map(e=>f.jsxs("div",{className:"p-3 bg-white rounded-xl shadow-sm border border-slate-100 flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium",children:e.name}),f.jsxs("div",{className:"text-xs text-slate-500",children:[e.email," • ",e.phone]}),f.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Status: ",f.jsx("span",{className:"font-medium",children:e.status})]})]}),f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsx("button",{onClick:()=>alert("Open account"),className:"px-2 py-1 rounded-lg bg-indigo-50 text-indigo-700 text-xs",children:"Open"}),f.jsx("button",{onClick:()=>alert("Send statement"),className:"px-2 py-1 rounded-lg bg-slate-100 text-slate-700 text-xs",children:"Statement"})]})]},e.id))}),f.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[f.jsxs("div",{className:"text-sm text-slate-500",children:["Page ",d," of ",p]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>c(e=>Math.max(1,e-1)),className:"px-3 py-1 rounded-xl bg-white border border-slate-200",children:"Prev"}),f.jsx("button",{onClick:()=>c(e=>Math.min(p,e+1)),className:"px-3 py-1 rounded-xl bg-white border border-slate-200",children:"Next"})]})]})]}),"rates"===t&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Rate Cards"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Manage contracted rates and spot rates."}),f.jsx("div",{className:"space-y-3",children:f.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm font-medium",children:"Export: Chennai → London"}),f.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Rate: ₹ 45,000 / container"})]})})]}),"billing"===t&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Billing"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Create invoices and view payments."}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"Create Invoice"}),f.jsx("button",{className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Pending Payments"})]})]}),"reports"===t&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Reports"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Operational and financial exports."}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"Shipment Report"}),f.jsx("button",{className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Profitability"})]})]}),"settings"===t&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Settings"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Integrations, webhooks and system config."}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl",children:[f.jsx("input",{type:"checkbox",defaultChecked:!0}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium",children:"Enable Tracking Integration"}),f.jsx("div",{className:"text-xs text-slate-500",children:"Push shipment updates to partner API"})]})]}),f.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl",children:[f.jsx("input",{type:"checkbox"}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium",children:"Enable Auto Invoicing"}),f.jsx("div",{className:"text-xs text-slate-500",children:"Generate invoices when shipment delivered"})]})]})]})]})]})]}),i&&f.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[f.jsx("div",{onClick:()=>r(null),className:"absolute inset-0 bg-black/40"}),f.jsx("div",{className:"relative w-full sm:max-w-lg mx-4 sm:mx-0 bg-white rounded-t-2xl sm:rounded-2xl shadow-lg overflow-hidden",children:f.jsxs("div",{className:"p-4 sm:p-6",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-semibold",children:i.id}),f.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[i.origin," → ",i.destination]})]}),f.jsx("button",{onClick:()=>r(null),className:"text-slate-500 hover:text-slate-700",children:"Close"})]}),f.jsxs("div",{className:"mt-4 text-sm text-slate-600",children:[f.jsxs("div",{className:"mb-2",children:["Status: ",f.jsx("span",{className:"font-medium",children:i.status})]}),f.jsxs("div",{className:"mb-2",children:["Weight: ",f.jsx("span",{className:"font-medium",children:i.weight})]}),f.jsxs("div",{className:"mb-2",children:["ETA: ",f.jsx("span",{className:"font-medium",children:i.eta})]})]}),f.jsxs("div",{className:"mt-6 flex gap-2",children:[f.jsx("button",{onClick:()=>alert("Open docs"),className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"Documents"}),f.jsx("button",{onClick:()=>r(null),className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Close"})]})]})})]})]})}const Z=[{id:"quotation",title:"QUOTATION",description:"Standard quotation for goods/services.",fields:[{name:"date",label:"Date",type:"date"},{name:"to",label:"Recipient Name",type:"text"},{name:"company",label:"Recipient Company",type:"text"},{name:"items",label:"Items (comma separated)",type:"textarea"},{name:"total",label:"Total Amount",type:"text"},{name:"notes",label:"Notes",type:"textarea"}],templateBody:"<h2>Quotation</h2>\n       <p>Date: {{date}}</p>\n       <p>To: <strong>{{to}}</strong> — {{company}}</p>\n       <p>Items: {{items}}</p>\n       <p>Total: {{total}}</p>\n       <p>Notes: {{notes}}</p>"},{id:"confirmation",title:"CONFIRMATION LETTER",description:"Confirmation of booking / order / shipment.",fields:[{name:"date",label:"Date",type:"date"},{name:"ref",label:"Reference No.",type:"text"},{name:"party",label:"Party Name",type:"text"},{name:"details",label:"Confirmation Details",type:"textarea"},{name:"signoff",label:"Sign-off (Name & Title)",type:"text"}],templateBody:"<h2>Confirmation Letter</h2>\n       <p>Date: {{date}}</p>\n       <p>Ref: {{ref}}</p>\n       <p>To: {{party}}</p>\n       <p>{{details}}</p>\n       <p>Sincerely, <br/>{{signoff}}</p>"},{id:"triparty",title:"TRI PARTY AGREEMENT",description:"Agreement document between three parties.",fields:[{name:"date",label:"Date",type:"date"},{name:"partyA",label:"Party A",type:"text"},{name:"partyB",label:"Party B",type:"text"},{name:"partyC",label:"Party C",type:"text"},{name:"subject",label:"Subject / Scope",type:"textarea"},{name:"term",label:"Term / Duration",type:"text"}],templateBody:"<h2>Tri-Party Agreement</h2>\n       <p>Date: {{date}}</p>\n       <p>Between: {{partyA}}, {{partyB}} and {{partyC}}</p>\n       <p>Subject: {{subject}}</p>\n       <p>Term: {{term}}</p>"},{id:"label",title:"LABEL FOR PRODUCT",description:"Product label template for printing and trade compliance.",fields:[{name:"productName",label:"Product Name",type:"text"},{name:"sku",label:"SKU / HS Code",type:"text"},{name:"weight",label:"Weight / Volume",type:"text"},{name:"origin",label:"Country of Origin",type:"text"},{name:"batch",label:"Batch / Lot No.",type:"text"}],templateBody:'<div style="border:1px solid #222; padding:12px; width:320px;">\n         <h3>{{productName}}</h3>\n         <p>SKU/HS: {{sku}}</p>\n         <p>Weight: {{weight}}</p>\n         <p>Origin: {{origin}}</p>\n         <p>Batch: {{batch}}</p>\n       </div>'},{id:"invoice",title:"INVOICE",description:"Commercial invoice for customs / billing.",fields:[{name:"date",label:"Date",type:"date"},{name:"invoiceNo",label:"Invoice No.",type:"text"},{name:"billTo",label:"Bill To",type:"text"},{name:"items",label:"Items (json or newline)",type:"textarea"},{name:"subtotal",label:"Subtotal",type:"text"},{name:"tax",label:"Tax",type:"text"},{name:"total",label:"Total",type:"text"}],templateBody:'<h2>Invoice</h2>\n       <p>Date: {{date}}</p>\n       <p>Invoice No: {{invoiceNo}}</p>\n       <p>Bill To: {{billTo}}</p>\n       <pre style="white-space:pre-wrap;">{{items}}</pre>\n       <p>Subtotal: {{subtotal}}</p>\n       <p>Tax: {{tax}}</p>\n       <p><strong>Total: {{total}}</strong></p>'},{id:"packing",title:"PACKING LIST",description:"Packing list for shipment and customs.",fields:[{name:"date",label:"Date",type:"date"},{name:"shipmentRef",label:"Shipment Ref.",type:"text"},{name:"packages",label:"Packages (count / details)",type:"textarea"},{name:"grossWeight",label:"Gross Weight",type:"text"},{name:"dimensions",label:"Dimensions",type:"text"}],templateBody:'<h2>Packing List</h2>\n       <p>Date: {{date}}</p>\n       <p>Shipment Ref: {{shipmentRef}}</p>\n       <pre style="white-space:pre-wrap;">{{packages}}</pre>\n       <p>Gross Weight: {{grossWeight}}</p>\n       <p>Dimensions: {{dimensions}}</p>'}];function ee(e,t){return e?e.replace(/{{\s*([^}]+)\s*}}/g,(e,s)=>{const a=(null==t?void 0:t[s])??"";return null==(l=a)?"":String(l).replace(/</g,"&lt;").replace(/>/g,"&gt;");var l}):""}const te=()=>{var t;const{user:s,sendTemplate:a,hasPermission:n}=e.useContext(A),[i,r]=e.useState(Z),[d,c]=e.useState((null==(t=null==i?void 0:i[0])?void 0:t.id)||""),o=e.useMemo(()=>i.find(e=>e.id===d),[i,d]),[m,x]=e.useState({}),[p,h]=e.useState(""),[u,g]=e.useState(!1),[b,j]=e.useState(null);function N(e,t){const s={...m,[e]:t};x(s);try{h(ee(o.templateBody,s))}catch(a){console.error("renderTemplate failed",a)}}function v(e){if(!e)return"";try{const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}catch(t){return console.error("stripHtml failed",t),e.replace(/<[^>]*>/g,"")}}e.useEffect(()=>{let e=!0;return async function(){var t,a,l;try{const l=(null==s?void 0:s.token)||localStorage.getItem("token"),{status:n,body:d}=await P("/api/templates",l);if(!e)return;n>=200&&n<300&&Array.isArray(d)&&d.length>0?(r(d),c((null==(t=d[0])?void 0:t.id)||"")):(console.warn("Using local fallback templates",n,d),i&&0!==i.length||(r(Z),c((null==(a=Z[0])?void 0:a.id)||"")))}catch(n){console.error("Failed to fetch templates, using fallback",n),i&&0!==i.length||(r(Z),c((null==(l=Z[0])?void 0:l.id)||""))}}(),()=>{e=!1}},[s]),e.useEffect(()=>{if(!o)return;const e={};o.fields.forEach(t=>{e[t.name]="date"===t.type?(new Date).toISOString().slice(0,10):""}),x(e),h(ee(o.templateBody,e)),j(null)},[o]);const y=(e="html")=>{try{const t="html"===e?p:v(p),s=new Blob([t],{type:"html"===e?"text/html":"text/plain"}),a=URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download=`${(null==o?void 0:o.id)||"document"}_${Date.now()}.${"html"===e?"html":"txt"}`,l.click(),URL.revokeObjectURL(a)}catch(t){console.error("Download failed",t),j({type:"error",text:"Download failed"}),setTimeout(()=>j(null),2500)}};function w(e){const t=m[e.name]??"";return"textarea"===e.type?f.jsx("textarea",{value:t,onChange:t=>N(e.name,t.target.value),className:"w-full border rounded p-2 text-sm",rows:4}):f.jsx("input",{type:"date"===e.type?"date":"text",value:t,onChange:t=>N(e.name,t.target.value),className:"w-full border rounded p-2 text-sm"})}return i&&0!==i.length?f.jsx("div",{className:"min-h-screen p-8 bg-indigo-50",children:f.jsxs("div",{className:"max-w-6xl mx-auto bg-white rounded-2xl p-6 shadow",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h1",{className:"text-3xl font-bold",children:"Shipper — Documentation Dashboard"}),f.jsx("div",{children:f.jsx(l,{to:"/",className:"text-sm text-gray-600",children:"Home"})})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[f.jsxs("div",{className:"p-4 border rounded",children:[f.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),f.jsx("p",{className:"font-medium text-lg",children:null==s?void 0:s.name})]}),f.jsxs("div",{className:"p-4 border rounded",children:[f.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),f.jsx("p",{className:"font-medium text-lg",children:null==s?void 0:s.email})]}),f.jsxs("div",{className:"p-4 border rounded",children:[f.jsx("p",{className:"text-sm text-gray-500",children:"Company"}),f.jsx("p",{className:"font-medium text-lg",children:null==s?void 0:s.companyName})]}),f.jsxs("div",{className:"p-4 border rounded",children:[f.jsx("p",{className:"text-sm text-gray-500",children:"Role"}),f.jsx("p",{className:"font-medium text-lg",children:null==s?void 0:s.role})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[f.jsxs("div",{className:"col-span-1 space-y-4",children:[f.jsxs("div",{className:"p-4 border rounded bg-white",children:[f.jsx("p",{className:"font-semibold mb-2",children:"Templates"}),f.jsx("ul",{className:"space-y-2 max-h-64 overflow-auto",children:i.map(e=>f.jsx("li",{children:f.jsx("button",{onClick:()=>c(e.id),className:"w-full text-left p-3 rounded "+(e.id===d?"bg-indigo-50 border border-indigo-200":"hover:bg-gray-50"),children:f.jsxs("div",{className:"flex justify-between",children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-medium",children:e.title}),f.jsx("div",{className:"text-xs text-gray-500",children:e.description})]}),f.jsxs("div",{className:"text-xs text-gray-400",children:[e.fields.length," fields"]})]})})},e.id))})]}),n("manage_templates")&&f.jsxs("div",{className:"p-4 border rounded bg-white",children:[f.jsx("p",{className:"font-semibold mb-2",children:"Template Management"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>alert("Create template - placeholder"),className:"px-3 py-2 bg-indigo-600 text-white rounded text-sm",children:"Create"}),f.jsx("button",{onClick:()=>alert("Edit template - placeholder"),className:"px-3 py-2 bg-gray-200 rounded text-sm",children:"Edit"})]})]})]}),f.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[f.jsxs("div",{className:"p-4 border rounded bg-white",children:[f.jsxs("div",{className:"flex justify-between items-center mb-3",children:[f.jsxs("p",{className:"font-semibold",children:["Fill: ",null==o?void 0:o.title]}),f.jsx("div",{className:"text-sm text-gray-500",children:null==o?void 0:o.description})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:null==o?void 0:o.fields.map(e=>f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:e.label}),w(e)]},e.name))}),f.jsxs("div",{className:"mt-4 flex gap-2 items-center",children:[f.jsx("button",{onClick:()=>{const e={};o.fields.forEach(t=>e[t.name]="date"===t.type?(new Date).toISOString().slice(0,10):""),x(e),h(ee(o.templateBody,e))},className:"px-3 py-2 bg-gray-200 rounded text-sm",children:"Reset"}),f.jsx("button",{onClick:()=>y("html"),className:"px-3 py-2 bg-indigo-600 text-white rounded text-sm",children:"Download HTML"}),f.jsx("button",{onClick:()=>y("txt"),className:"px-3 py-2 bg-gray-200 rounded text-sm",children:"Download TXT"}),f.jsx("button",{onClick:async()=>{try{const e=v(p);if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(e);else{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select();const s=document.execCommand("copy");if(document.body.removeChild(t),!s)throw new Error("execCommand copy failed")}j({type:"success",text:"Copied to clipboard"})}catch(e){console.error("Copy failed",e),j({type:"error",text:"Copy failed. Check browser permissions."})}setTimeout(()=>j(null),2500)},className:"px-3 py-2 bg-green-600 text-white rounded text-sm",children:"Copy to Clipboard"})]})]}),f.jsxs("div",{className:"p-4 border rounded bg-white",children:[f.jsx("p",{className:"font-semibold mb-2",children:"Share / Email"}),f.jsx(se,{defaultTo:(null==s?void 0:s.email)||"",onSend:({to:e,subject:t})=>(async({to:e,subject:t})=>{g(!0);try{if(!e||!String(e).includes("@"))return j({type:"error",text:"Please enter a valid recipient email."}),g(!1),void setTimeout(()=>j(null),3e3);const s=ee((null==o?void 0:o.templateBody)||"",m),l=t&&t.trim()?t:(null==o?void 0:o.title)||"Document",n=await a({to:e,subject:l,templateId:null==o?void 0:o.id,templateHtml:s,values:m});if(console.log("sendTemplate response:",n),n.ok)j({type:"success",text:"Email queued / sent (server)."});else if(403===n.status){const t=v(s),a=`mailto:${encodeURIComponent(e)}?subject=${encodeURIComponent(l)}&body=${encodeURIComponent(t)}`;window.open(a,"_blank"),j({type:"warning",text:"Permission denied on server — opened mail client (fallback)."})}else j({type:"error",text:n.error||"Server rejected email. Not sent from client."})}catch(s){console.error("sendByEmail unexpected error",s);try{const s=v(ee((null==o?void 0:o.templateBody)||"",m)),a=`mailto:${encodeURIComponent(e)}?subject=${encodeURIComponent(t||(null==o?void 0:o.title)||"")}&body=${encodeURIComponent(s)}`;window.open(a,"_blank"),j({type:"warning",text:"Network error — opened mail client as fallback."})}catch(l){console.error("mailto fallback failed",l),j({type:"error",text:"Unable to send email (network/server)."})}}finally{g(!1),setTimeout(()=>j(null),3500)}})({to:e,subject:t}),disabled:u})]})]}),f.jsx("div",{className:"col-span-1",children:f.jsxs("div",{className:"p-4 border rounded bg-white",children:[f.jsx("p",{className:"font-semibold mb-2",children:"Preview"}),f.jsx("div",{className:"border p-3 rounded bg-white max-h-[60vh] overflow-auto",children:f.jsx("div",{dangerouslySetInnerHTML:{__html:p}})}),b&&f.jsx("div",{className:"mt-3 p-2 rounded text-sm "+("success"===b.type?"bg-green-50 text-green-700":"error"===b.type?"bg-red-50 text-red-700":"bg-yellow-50 text-yellow-700"),children:b.text})]})})]})]})}):f.jsx("div",{className:"min-h-screen p-8 bg-indigo-50",children:f.jsx("div",{className:"max-w-4xl mx-auto bg-white rounded-2xl p-6 shadow",children:f.jsx("p",{children:"No templates found."})})})};function se({defaultTo:t="",onSend:s,disabled:a=!1}){const[l,n]=e.useState(t),[i,r]=e.useState("");return e.useEffect(()=>n(t),[t]),f.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[f.jsx("input",{value:l,onChange:e=>n(e.target.value),placeholder:"to@example.com",className:"w-full border rounded p-2 text-sm"}),f.jsx("input",{value:i,onChange:e=>r(e.target.value),placeholder:"Subject (optional)",className:"w-full border rounded p-2 text-sm"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>s({to:l,subject:i}),disabled:a,className:"px-3 py-2 bg-indigo-600 text-white rounded text-sm",children:a?"Sending…":"Send Email"}),f.jsx("button",{onClick:()=>{n(t),r("")},className:"px-3 py-2 bg-gray-200 rounded text-sm",children:"Clear"})]})]})}const ae={invoices:{id:"invoices",title:"Invoices",short:"Create and manage customer invoices"},receivables:{id:"receivables",title:"Receivables",short:"Track outstanding payments and aging"},payables:{id:"payables",title:"Payables",short:"Manage supplier invoices and payments"},reconciliation:{id:"reconciliation",title:"Bank Reconciliation",short:"Reconcile bank statements"},payroll:{id:"payroll",title:"Driver Payouts",short:"Calculate and process driver payouts"},gst:{id:"gst",title:"GST & Taxes",short:"Prepare GST/TDS and tax filings"},reports:{id:"reports",title:"Financial Reports",short:"P&L, cash flow and aging reports"},expenses:{id:"expenses",title:"Expenses",short:"Record and approve operational expenses"}},le=Array.from({length:18}).map((e,t)=>({id:`INV-${2e3+t}`,customer:["Alpha Logistics","Blue Freight","Ceylon Cargo"][t%3],amount:100*(Math.floor(100*Math.random())+20),status:t%4==0?"Overdue":t%3==0?"Part Paid":"Pending",date:"2025-11-"+(t%28+1)}));function ne(){const[t,s]=e.useState("invoices"),[l,n]=e.useState(""),[i,r]=e.useState(null),[d,c]=e.useState(1),o=a(),m=e.useMemo(()=>{const e=l.trim().toLowerCase();return e?le.filter(t=>t.id.toLowerCase().includes(e)||t.customer.toLowerCase().includes(e)||String(t.amount).includes(e)||t.status.toLowerCase().includes(e)):le},[l]),x=Math.max(1,Math.ceil(m.length/8)),p=m.slice(8*(d-1),8*d);return f.jsxs("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-6 lg:p-8",children:[f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("header",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[f.jsx("div",{children:f.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-slate-800",children:"Accounts"})}),f.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[f.jsx("input",{value:l,onChange:e=>{n(e.target.value),c(1)},placeholder:"Search invoices, customer, id...",className:"flex-1 sm:flex-none px-3 py-2 rounded-xl border border-slate-200 bg-white shadow-sm focus:outline-none"}),f.jsx("button",{onClick:()=>function(e=m,t="invoices.csv"){const s=e.map(e=>`${e.id},${e.customer},${e.amount},${e.status},${e.date}`),a=new Blob([["id,customer,amount,status,date",...s].join("\n")],{type:"text/csv;charset=utf-8"}),l=URL.createObjectURL(a),n=document.createElement("a");n.href=l,n.download=t,document.body.appendChild(n),n.click(),n.remove(),URL.revokeObjectURL(l)}(),className:"ml-2 px-3 py-2 rounded-xl bg-indigo-600 text-white text-sm",children:"Export"}),f.jsx("button",{onClick:function(){const e=Object.values(ae).map(e=>`- ${e.title}: ${e.short}`).join("\n"),t=new Blob([`Accounts Dashboard Specification\n\n${e}`],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="accounts_spec.txt",document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(s)},className:"ml-2 px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm",children:"Specification"}),f.jsx("button",{onClick:()=>o("/signup"),className:"ml-2 px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm",children:"Home"})]})]}),f.jsx("nav",{className:"mb-5",children:f.jsx("div",{className:"flex flex-wrap gap-2",children:Object.values(ae).map(e=>f.jsx("button",{onClick:()=>{s(e.id),c(1)},className:"px-3 py-2 rounded-xl text-sm "+(t===e.id?"bg-indigo-600 text-white":"bg-white text-slate-700 border border-slate-200"),children:e.title},e.id))})}),f.jsxs("section",{children:["invoices"===t&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800",children:"Invoices"}),f.jsxs("div",{className:"text-sm text-slate-500",children:["Total ",m.length]})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"text-xs text-slate-500 uppercase",children:[f.jsx("th",{className:"px-3 py-2",children:"ID"}),f.jsx("th",{className:"px-3 py-2",children:"Customer"}),f.jsx("th",{className:"px-3 py-2",children:"Amount"}),f.jsx("th",{className:"px-3 py-2",children:"Status"}),f.jsx("th",{className:"px-3 py-2",children:"Date"}),f.jsx("th",{className:"px-3 py-2"})]})}),f.jsx("tbody",{children:p.map(e=>f.jsxs("tr",{className:"border-t",children:[f.jsx("td",{className:"px-3 py-3 text-sm text-slate-700",children:e.id}),f.jsx("td",{className:"px-3 py-3 text-sm text-slate-700",children:e.customer}),f.jsxs("td",{className:"px-3 py-3 text-sm text-slate-700",children:["₹ ",e.amount.toLocaleString()]}),f.jsx("td",{className:"px-3 py-3 text-sm",children:f.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("Overdue"===e.status?"bg-rose-100 text-rose-700":"Part Paid"===e.status?"bg-amber-100 text-amber-800":"bg-green-100 text-green-800"),children:e.status})}),f.jsx("td",{className:"px-3 py-3 text-sm text-slate-500",children:e.date}),f.jsx("td",{className:"px-3 py-3 text-right",children:f.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[f.jsx("button",{onClick:()=>r(e),className:"text-sm px-2 py-1 rounded-lg bg-indigo-50 text-indigo-700",children:"View"}),f.jsx("button",{onClick:()=>alert("Mark as paid - implement API"),className:"text-sm px-2 py-1 rounded-lg bg-slate-100 text-slate-700",children:"Mark Paid"})]})})]},e.id))})]})}),f.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[f.jsxs("div",{className:"text-sm text-slate-500",children:["Page ",d," of ",x]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>c(e=>Math.max(1,e-1)),className:"px-3 py-1 rounded-xl bg-white border border-slate-200",children:"Prev"}),f.jsx("button",{onClick:()=>c(e=>Math.min(x,e+1)),className:"px-3 py-1 rounded-xl bg-white border border-slate-200",children:"Next"})]})]})]}),"receivables"===t&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Receivables"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Aging and collection status."}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Total Outstanding"}),f.jsx("div",{className:"text-2xl font-semibold mt-2",children:"₹ 1,240,000"})]}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"90 Days"}),f.jsx("div",{className:"text-2xl font-semibold mt-2",children:"₹ 224,000"})]})]})]}),"payables"===t&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Payables"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Upcoming supplier payments and due dates."}),f.jsx("div",{className:"space-y-3",children:f.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium",children:"Blue Freight"}),f.jsx("div",{className:"text-xs text-slate-500",children:"Due: 2025-11-24 • ₹ 82,000"})]}),f.jsx("div",{children:f.jsx("button",{className:"px-3 py-1 rounded-lg bg-indigo-600 text-white text-sm",children:"Pay"})})]})})]}),"reconciliation"===t&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Bank Reconciliation"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Match bank transactions to system entries."}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-700",children:"Last reconciled: 2025-11-10"}),f.jsx("div",{className:"mt-3 text-sm text-slate-600",children:"Unmatched: 12 transactions"})]})]}),"payroll"===t&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Driver Payouts"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Advance, trip-pay and final settlements."}),f.jsx("div",{className:"space-y-3",children:f.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm font-medium",children:"Karthik R"}),f.jsx("div",{className:"text-xs text-slate-500",children:"Pending: ₹ 12,400"})]})})]}),"gst"===t&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"GST & Taxes"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Return status and pending filings."}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"GSTR-1 Filed"}),f.jsx("div",{className:"text-sm font-medium mt-1",children:"Month: Oct 2025"})]}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"GSTR-3B Pending"}),f.jsx("div",{className:"text-sm font-medium mt-1",children:"Due: 2025-11-20"})]})]})]}),"reports"===t&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Reports"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Export financial and operational reports."}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"P&L"}),f.jsx("button",{className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Aging"})]})]}),"expenses"===t&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Expenses"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Fuel, repairs, tolls and permit costs."}),f.jsx("div",{className:"space-y-3",children:f.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm font-medium",children:"Fuel - Blue Freight"}),f.jsx("div",{className:"text-xs text-slate-500",children:"₹ 18,200 • 2025-11-13"})]})})]})]})]}),i&&f.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[f.jsx("div",{onClick:()=>r(null),className:"absolute inset-0 bg-black/40"}),f.jsx("div",{className:"relative w-full sm:max-w-md mx-4 sm:mx-0 bg-white rounded-t-2xl sm:rounded-2xl shadow-lg overflow-hidden",children:f.jsxs("div",{className:"p-4 sm:p-6",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-semibold",children:i.id}),f.jsx("p",{className:"text-sm text-slate-500 mt-1",children:i.customer})]}),f.jsx("button",{onClick:()=>r(null),className:"text-slate-500 hover:text-slate-700",children:"Close"})]}),f.jsxs("div",{className:"mt-4 text-sm text-slate-600",children:[f.jsxs("div",{className:"mb-2",children:["Amount: ",f.jsxs("span",{className:"font-medium",children:["₹ ",i.amount.toLocaleString()]})]}),f.jsxs("div",{className:"mb-2",children:["Status: ",f.jsx("span",{className:"font-medium",children:i.status})]}),f.jsxs("div",{className:"mb-2",children:["Date: ",f.jsx("span",{className:"font-medium",children:i.date})]})]}),f.jsxs("div",{className:"mt-6 flex gap-2",children:[f.jsx("button",{onClick:()=>alert("Download PDF - implement API"),className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"Download"}),f.jsx("button",{onClick:()=>r(null),className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Close"})]})]})})]})]})}const ie=["owner","driver","logistics","admin"],re={transport:{id:"transport",title:"Transport Orders",short:"Create and assign transport orders, view status."},fleet:{id:"fleet",title:"Fleet Management",short:"View fleet, maintenance schedule."},invoices:{id:"invoices",title:"Invoicing & Billing",short:"Create & send invoices."},compliance:{id:"compliance",title:"Compliance & Licenses",short:"Manage permits and insurance."},reports:{id:"reports",title:"Reports & KPIs",short:"View utilization and KPIs."},drivers:{id:"drivers",title:"Driver Management",short:"Hire, train and assign drivers."},docs:{id:"docs",title:"Export Documents",short:"LR, E-way, gate pass and customs docs."},settings:{id:"settings",title:"System Settings",short:"App config and permissions."}},de={owner:["transport","fleet","invoices","compliance","reports","drivers","settings"],logistics:["transport","docs","drivers","reports"],driver:["docs","transport"],admin:["settings","reports","invoices","drivers"]},ce=e.createContext();function oe({feature:e,onOpen:t}){return f.jsxs("article",{className:"bg-white rounded-2xl p-4 shadow-sm border border-slate-100 flex flex-col",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-medium text-slate-800",children:e.title}),f.jsx("p",{className:"text-sm text-slate-500 mt-2",children:e.short})]}),f.jsxs("div",{className:"mt-4 flex gap-2",children:[f.jsx("button",{onClick:()=>t(e),className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm font-medium",children:"Open"}),f.jsx("button",{onClick:()=>me(e),className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Download Spec"}),f.jsxs("span",{className:"ml-auto text-xs text-slate-400",children:["#",e.id]})]})]})}function me(e){const t=`Feature: ${e.title}\n\n${e.short}`,s=new Blob([t],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download=`${e.id}_spec.txt`,document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(a)}function xe(){const[t,s]=e.useState("owner"),[l,n]=e.useState(null),i=a(),r=(de[t]||[]).map(e=>re[e]);return f.jsx(ce.Provider,{value:{role:t,setRole:s},children:f.jsxs("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-6 lg:p-10",children:[f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("header",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[f.jsx("div",{children:f.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-slate-800",children:"Transporter Dashboard"})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("select",{value:t,onChange:e=>s(e.target.value),className:"px-3 py-2 rounded-xl border border-slate-200 bg-white shadow-sm",children:ie.map(e=>f.jsx("option",{value:e,children:e},e))}),f.jsx("button",{onClick:()=>i("/signup"),className:"px-3 py-2 rounded-2xl bg-white border border-slate-200 text-sm",children:"Home"}),f.jsx("button",{onClick:()=>{const e=r.map(e=>`- ${e.title}: ${e.short}`).join("\n"),s=new Blob([`Role: ${t}\n\n${e}`],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download=`role_${t}_spec.txt`,document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(a)},className:"px-3 py-2 rounded-2xl bg-indigo-600 text-white text-sm",children:"Specification"})]})]}),f.jsx("section",{children:0===r.length?f.jsx("div",{className:"p-4 bg-white rounded-xl shadow-sm text-slate-600",children:"No features assigned."}):f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(e=>f.jsx(oe,{feature:e,onOpen:e=>n(e)},e.id))})})]}),l&&f.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[f.jsx("div",{onClick:()=>n(null),className:"absolute inset-0 bg-black/40"}),f.jsx("div",{className:"relative w-full sm:max-w-2xl mx-4 sm:mx-0 bg-white rounded-t-2xl sm:rounded-2xl shadow-lg overflow-hidden",children:f.jsxs("div",{className:"p-4 sm:p-6",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-semibold",children:l.title}),f.jsx("p",{className:"text-sm text-slate-500 mt-1",children:l.short})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>i("/isgnup"),className:"text-sm px-3 py-2 rounded-lg bg-white border border-slate-200",children:"Home"}),f.jsx("button",{onClick:()=>n(null),className:"text-slate-500 hover:text-slate-700",children:"Close"})]})]}),f.jsxs("div",{className:"mt-4 text-sm text-slate-600",children:[f.jsx("p",{children:f.jsx("strong",{children:"Actions"})}),f.jsx("ul",{className:"list-disc ml-5 mt-2 text-sm text-slate-600",children:pe(l.id,t).map(e=>f.jsx("li",{children:e},e))})]}),f.jsxs("div",{className:"mt-6 flex gap-2",children:[f.jsx("button",{onClick:()=>me(l),className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"Download Spec"}),f.jsx("button",{onClick:()=>n(null),className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Close"})]})]})})]})]})})}function pe(e,t){const s={transport:["Create Order","Track Order","Assign Driver"],fleet:["View Fleet","Schedule Maintenance","Add/Remove Vehicle"],invoices:["Create Invoice","View Payments","Send Reminder"],compliance:["View Permits","Upload Documents","Renew Insurance"],reports:["Download KPI","Filter by Date","Export CSV"],drivers:["Add Driver","View Performance","Assign Incentive"],docs:["Generate LR","Upload Gate-Pass","View Customs Status"],settings:["Manage Users","Update Permissions","System Logs"]}[e]||["View"];return"driver"===t?s.slice(0,Math.min(2,s.length)):"owner"===t?[...s,"View Financial Impact"]:s}const he={users:{id:"users",title:"User Management",short:"Manage users, roles and access."},billing:{id:"billing",title:"Billing & Invoices",short:"View invoices and payments."},audit:{id:"audit",title:"Audit Logs",short:"System activity and changes."},system:{id:"system",title:"System Settings",short:"Global settings and integrations."},reports:{id:"reports",title:"Reports & Analytics",short:"Download KPIs and usage."},notifications:{id:"notifications",title:"Notifications",short:"Manage templates and alerts."}},ue=Array.from({length:23}).map((e,t)=>({id:`U-${1e3+t}`,name:["Asha Patel","Ravi Kumar","Maya Singh","Karthik R"][t%4],email:`user${t+1}@example.com`,role:["admin","owner","logistics","driver"][t%4],status:t%5==0?"Suspended":"Active",lastLogin:"2025-11-"+(t%28+1)}));function ge(){const[t,s]=e.useState(""),[l,n]=e.useState("users"),[i,r]=e.useState(null),[d,c]=e.useState(1),o=a(),m=e.useMemo(()=>{const e=t.trim().toLowerCase();return e?ue.filter(t=>t.id.toLowerCase().includes(e)||t.name.toLowerCase().includes(e)||t.email.toLowerCase().includes(e)||t.role.toLowerCase().includes(e)):ue},[t]),x=Math.max(1,Math.ceil(m.length/8)),p=m.slice(8*(d-1),8*d);function h(){r(null)}return f.jsxs("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-6 lg:p-10",children:[f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsxs("header",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[f.jsx("div",{children:f.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-slate-800",children:"Admin Dashboard"})}),f.jsxs("div",{className:"flex gap-2 items-center",children:[f.jsx("input",{value:t,onChange:e=>{s(e.target.value),c(1)},placeholder:"Search users, id, email...",className:"px-3 py-2 rounded-xl border border-slate-200 bg-white shadow-sm w-56 sm:w-72 focus:outline-none"}),f.jsx("button",{onClick:()=>function(){const e=Object.values(he).map(e=>`- ${e.title}: ${e.short}`).join("\n"),t=new Blob([`Admin Dashboard Specification\n\n${e}`],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="admin_dashboard_spec.txt",document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(s)}(),className:"px-3 py-2 rounded-xl bg-indigo-600 text-white text-sm",children:"Specification"}),f.jsx("button",{onClick:()=>o("/signup"),className:"px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm",children:"Home"})]})]}),f.jsx("nav",{className:"mb-6",children:f.jsx("div",{className:"flex flex-wrap gap-3",children:Object.values(he).map(e=>f.jsx("button",{onClick:()=>{n(e.id),c(1)},className:"px-3 py-2 rounded-xl text-sm "+(l===e.id?"bg-indigo-600 text-white":"bg-white text-slate-700 border border-slate-200"),children:e.title},e.id))})}),f.jsxs("section",{children:["users"===l&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800",children:"Users"}),f.jsxs("div",{className:"text-sm text-slate-500",children:["Showing ",m.length," users"]})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"text-xs text-slate-500 uppercase",children:[f.jsx("th",{className:"px-3 py-2",children:"ID"}),f.jsx("th",{className:"px-3 py-2",children:"Name"}),f.jsx("th",{className:"px-3 py-2",children:"Email"}),f.jsx("th",{className:"px-3 py-2",children:"Role"}),f.jsx("th",{className:"px-3 py-2",children:"Status"}),f.jsx("th",{className:"px-3 py-2",children:"Last Login"}),f.jsx("th",{className:"px-3 py-2"})]})}),f.jsx("tbody",{children:p.map(e=>f.jsxs("tr",{className:"border-t",children:[f.jsx("td",{className:"px-3 py-3 text-sm text-slate-700",children:e.id}),f.jsx("td",{className:"px-3 py-3 text-sm text-slate-700",children:e.name}),f.jsx("td",{className:"px-3 py-3 text-sm text-slate-500",children:e.email}),f.jsx("td",{className:"px-3 py-3 text-sm text-slate-600",children:e.role}),f.jsx("td",{className:"px-3 py-3 text-sm",children:f.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("Active"===e.status?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800"),children:e.status})}),f.jsx("td",{className:"px-3 py-3 text-sm text-slate-500",children:e.lastLogin}),f.jsx("td",{className:"px-3 py-3 text-right",children:f.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[f.jsx("button",{onClick:()=>{r(e)},className:"text-sm px-2 py-1 rounded-lg bg-indigo-50 text-indigo-700",children:"View"}),f.jsx("button",{className:"text-sm px-2 py-1 rounded-lg bg-slate-100 text-slate-700",children:"Edit"})]})})]},e.id))})]})}),f.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[f.jsxs("div",{className:"text-sm text-slate-500",children:["Page ",d," of ",x]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>c(e=>Math.max(1,e-1)),className:"px-3 py-1 rounded-xl bg-white border border-slate-200",children:"Prev"}),f.jsx("button",{onClick:()=>c(e=>Math.min(x,e+1)),className:"px-3 py-1 rounded-xl bg-white border border-slate-200",children:"Next"})]})]})]}),"billing"===l&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Billing & Invoices"}),f.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Recent invoices, payments and billing configuration."}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Outstanding"}),f.jsx("div",{className:"text-2xl font-semibold mt-2",children:"₹ 124,500"})]}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Due this month"}),f.jsx("div",{className:"text-2xl font-semibold mt-2",children:"₹ 48,200"})]})]})]}),"audit"===l&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Audit Logs"}),f.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Recent system events and security logs."}),f.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[f.jsx("div",{className:"p-3 bg-slate-50 rounded-md",children:"[2025-11-18 09:12] User U-1001 updated role from driver → logistics"}),f.jsx("div",{className:"p-3 bg-slate-50 rounded-md",children:"[2025-11-18 08:55] Failed login attempt for user user7@example.com"}),f.jsx("div",{className:"p-3 bg-slate-50 Rounded-md",children:"[2025-11-17 15:42] Billing settings updated by admin"})]})]}),"system"===l&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"System Settings"}),f.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Feature flags, integrations and environment settings."}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl",children:[f.jsx("input",{type:"checkbox",defaultChecked:!0}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium",children:"Enable Maintenance Mode"}),f.jsx("div",{className:"text-xs text-slate-500",children:"Temporarily prevent new signups"})]})]}),f.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl",children:[f.jsx("input",{type:"checkbox"}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium",children:"Enable Feature X"}),f.jsx("div",{className:"text-xs text-slate-500",children:"Internal beta toggle"})]})]})]})]}),"reports"===l&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Reports & Analytics"}),f.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Download system reports and KPIs."}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"Download Usage Report"}),f.jsx("button",{className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Download Financial Report"})]})]}),"notifications"===l&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Notifications"}),f.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Configure templates and alert rules."}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm font-medium",children:"Shipment Delay Alert"}),f.jsx("div",{className:"text-xs text-slate-500",children:"Sent to customers when delivery delayed over 48h"})]}),f.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm font-medium",children:"Invoice Reminder"}),f.jsx("div",{className:"text-xs text-slate-500",children:"2 reminders before due date"})]})]})]})]})]}),i&&f.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[f.jsx("div",{onClick:h,className:"absolute inset-0 bg-black/40"}),f.jsx("div",{className:"relative w-full sm:max-w-md mx-4 sm:mx-0 bg-white rounded-t-2xl sm:rounded-2xl shadow-lg overflow-hidden",children:f.jsxs("div",{className:"p-4 sm:p-6",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-semibold",children:i.name}),f.jsx("p",{className:"text-sm text-slate-500 mt-1",children:i.email})]}),f.jsx("button",{onClick:h,className:"text-slate-500 hover:text-slate-700",children:"Close"})]}),f.jsxs("div",{className:"mt-4 text-sm text-slate-600",children:[f.jsxs("div",{className:"mb-2",children:["ID: ",f.jsx("span",{className:"font-medium",children:i.id})]}),f.jsxs("div",{className:"mb-2",children:["Role: ",f.jsx("span",{className:"font-medium",children:i.role})]}),f.jsxs("div",{className:"mb-2",children:["Status: ",f.jsx("span",{className:"font-medium",children:i.status})]}),f.jsxs("div",{className:"mb-2",children:["Last Login: ",f.jsx("span",{className:"font-medium",children:i.lastLogin})]})]}),f.jsxs("div",{className:"mt-6 flex gap-2",children:[f.jsx("button",{className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"Suspend"}),f.jsx("button",{className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Edit"})]})]})})]})]})}const be=[{id:"transport",title:"Transporting Export Goods",short:"Pick up goods and deliver to port/CFS/airport on time.",details:"Drive the truck to pick up export goods from the warehouse or supplier and deliver them safely to seaports, airports, CFS (Container Freight Stations), or ICDs. Monitor timing against vessel/flight cut-offs and communicate ETA to the export team."},{id:"loading",title:"Loading & Unloading Assistance",short:"Assist/supervise loading; secure cargo to prevent damage.",details:"Help or supervise loading of export cargo. Ensure goods are placed properly to avoid damage, confirm load is balanced and tied properly, and check that weight limits and safety rules are followed."},{id:"documents",title:"Document Handling",short:"Carry and submit required export documents.",details:"Handle documents such as Delivery Challan, Invoice copies, Packing List, E-Way Bill, Gate Pass, LR/Consignment Note and submit as required."},{id:"coordination",title:"Coordination With Team",short:"Communicate arrival times, delays and follow logistics instructions.",details:"Communicate arrival times, delays or issues to the transport or export team. Follow route instructions and relay incidents."},{id:"maintenance",title:"Vehicle Maintenance & Safety",short:"Daily vehicle checks and reporting of mechanical issues.",details:"Daily routine checks (fuel, brakes, lights, tyre condition), report mechanical problems, and ensure compliance."},{id:"compliance",title:"Compliance & Legal Requirements",short:"Carry valid documents and permits.",details:"Carry Driving License, RC, Insurance, Pollution certificate and any state permits."},{id:"timely",title:"Timely Delivery",short:"Deliver on-time to avoid missing vessel/flight cut-offs.",details:"Ensure on-time movement to CFS/ICD, airport cargo terminal or port stuffing point."},{id:"safety",title:"Cargo Safety & Security",short:"Protect cargo from damage, tampering and theft.",details:"Maintain safe driving practices to protect goods, ensure container seals are intact, and report issues."},{id:"logs",title:"Keeping Trip Logs",short:"Record trip data: distance, fuel, gate in/out, incidents.",details:"Record distance traveled, fuel usage, time in/out and incidents."},{id:"customs",title:"Supporting Customs Procedures",short:"Support weighing, inspections and CHA coordination.",details:"At CFS/Port, get containers weighed, submit documents and coordinate with CHA."}];function je(){const[t,s]=e.useState(""),[l,n]=e.useState(null),[i,r]=e.useState(!1),d=a(),c=be.filter(e=>{const s=t.trim().toLowerCase();return!s||(e.title.toLowerCase().includes(s)||e.short.toLowerCase().includes(s)||e.details.toLowerCase().includes(s))});function o(){r(!1),n(null)}return f.jsxs("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-6 lg:p-10",children:[f.jsxs("div",{className:"max-w-5xl mx-auto",children:[f.jsxs("header",{className:"flex items-start justify-between mb-6 gap-4",children:[f.jsx("div",{className:"flex-1",children:f.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-slate-800",children:"Truck Driver — Export Roles"})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>d("/signup"),className:"px-3 py-2 rounded-2xl bg-white border border-slate-200 text-sm",children:"Home"}),f.jsx("button",{onClick:function(){const e=be.map(e=>`- ${e.title}: ${e.short}`).join("\n"),t=new Blob([`Truck Driver Roles Specification\n\n${e}`],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="truck_driver_roles_spec.txt",document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(s)},className:"px-3 py-2 rounded-2xl bg-indigo-600 text-white text-sm",children:"Specification"})]})]}),f.jsx("div",{className:"mb-4",children:f.jsx("input",{id:"search",value:t,onChange:e=>s(e.target.value),placeholder:"Search roles or keywords...",className:"w-full px-4 py-3 rounded-xl border border-slate-200 bg-white shadow-sm focus:outline-none"})}),f.jsx("main",{children:0===c.length?f.jsx("div",{className:"text-center py-12",children:f.jsx("p",{className:"text-slate-600",children:"No roles match your search."})}):f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(e=>f.jsxs("article",{className:"bg-white rounded-2xl p-4 shadow-sm border border-slate-100 flex flex-col",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-medium text-slate-800",children:e.title}),f.jsx("p",{className:"text-sm text-slate-500 mt-2",children:e.short}),f.jsxs("details",{className:"mt-3 text-sm text-slate-600",children:[f.jsx("summary",{className:"cursor-pointer select-none",children:"Quick preview"}),f.jsx("p",{className:"mt-2 leading-relaxed",children:e.details})]})]}),f.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[f.jsx("button",{onClick:()=>function(e){n(e),r(!0)}(e),className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm font-medium",children:"Open"}),f.jsx("button",{onClick:()=>{const t=new Blob([`Title: ${e.title}\n\n${e.details}`],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`${e.id}_jd.txt`,document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(s)},className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Download JD"}),f.jsxs("span",{className:"ml-auto text-xs text-slate-400",children:["ID: ",e.id]})]})]},e.id))})})]}),i&&l&&f.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[f.jsx("div",{onClick:o,className:"absolute inset-0 bg-black/40"}),f.jsx("div",{className:"relative w-full sm:max-w-2xl mx-4 sm:mx-0 bg-white rounded-t-2xl sm:rounded-2xl shadow-lg overflow-auto",style:{maxHeight:"90vh"},children:f.jsxs("div",{className:"p-4 sm:p-6",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsx("div",{children:f.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:l.title})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>d("/isgnup"),className:"px-3 py-2 rounded-lg bg-white border border-slate-200 text-sm",children:"Home"}),f.jsx("button",{onClick:o,className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Close"})]})]}),f.jsx("div",{className:"mt-4 text-sm text-slate-600 leading-relaxed whitespace-pre-line",children:l.details}),f.jsxs("div",{className:"mt-6 flex gap-2",children:[f.jsx("button",{onClick:()=>{const e=new Blob([`Title: ${l.title}\n\n${l.details}`],{type:"text/plain;charset=utf-8"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download=`${l.id}_jd.txt`,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(t)},className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"Download JD"}),f.jsx("button",{onClick:o,className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Close"})]})]})})]})]})}const Ne={commercial:{id:"commercial",title:"Commercial / Sales",short:"Contracts, SLAs and key accounts"},operations:{id:"operations",title:"Operations Oversight",short:"Filing SLAs, slot bookings, cut-offs"},finance:{id:"finance",title:"Finance & Billing",short:"P&L, receivables and duty reconciliation"},compliance:{id:"compliance",title:"Compliance",short:"Customs, GST, bonds and audit readiness"},vendors:{id:"vendors",title:"Vendors & Partners",short:"Manage C&F, port partners and SLAs"},reports:{id:"reports",title:"Reports & KPIs",short:"Management reports, aging and dashboards"},risk:{id:"risk",title:"Risk & Guarantees",short:"Bank guarantees, insurance and claims"},tech:{id:"tech",title:"Technology",short:"APIs, TMS integrations and telemetry"}},fe={filingsToday:46,avgClearanceTimeHrs:12,outstandingReceivables:82e4,monthRevenue:275e4},ve=Array.from({length:12}).map((e,t)=>({id:`CUST-${500+t}`,name:["Alpha Importers","Oceanex","TransGlobal"][t%3],outstanding:1e3*(Math.floor(50*Math.random())+10),lastActive:"2025-11-"+(t%28+1),status:t%5==0?"On Hold":"Active"}));function ye(){const t=a(),[s,l]=e.useState("operations"),[n,i]=e.useState(""),[r,d]=e.useState(null),[c,o]=e.useState(1),m=e.useMemo(()=>Object.values(Ne),[]),x=e.useMemo(()=>{const e=n.trim().toLowerCase();return e?m.filter(t=>t.title.toLowerCase().includes(e)||t.short.toLowerCase().includes(e)):m},[n,m]),p=e.useMemo(()=>{const e=n.trim().toLowerCase();return e?ve.filter(t=>t.id.toLowerCase().includes(e)||t.name.toLowerCase().includes(e)):ve},[n]);function h(){const e=Object.values(Ne).map(e=>`- ${e.title}: ${e.short}`).join("\n"),t=new Blob([`Clearance Agent — Company Owner Specification\n\n${e}`],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="clearance_company_owner_spec.txt",document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(s)}function u(e,t,s){const a=[t.join(","),...e.map(e=>t.map(t=>e[t]??"").join(","))].join("\n"),l=new Blob([a],{type:"text/csv;charset=utf-8"}),n=URL.createObjectURL(l),i=document.createElement("a");i.href=n,i.download=s,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(n)}return Math.max(1,Math.ceil(("commercial"===s?p.length:x.length)/6)),("commercial"===s?p:x).slice(6*(c-1),6*c),f.jsxs("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-6 lg:p-10",children:[f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("header",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[f.jsx("div",{children:f.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-slate-800",children:"Clearance Agent — Company Owner"})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"hidden sm:flex flex-col text-right mr-2"}),f.jsx("button",{onClick:h,className:"px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm",children:"Specification"}),f.jsx("button",{onClick:()=>t("/signup"),className:"px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm",children:"Home"}),f.jsx("button",{onClick:()=>{"commercial"===s?u(p,["id","name","outstanding","lastActive","status"],"accounts.csv"):h()},className:"px-3 py-2 rounded-xl bg-indigo-600 text-white text-sm",children:"Export"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[f.jsxs("aside",{className:"lg:col-span-1 space-y-4",children:[f.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-slate-100",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Filings today"}),f.jsx("div",{className:"text-2xl font-semibold mt-1",children:fe.filingsToday})]}),f.jsxs("div",{className:"text-sm text-slate-500",children:[f.jsx("div",{children:"Avg clearance"}),f.jsxs("div",{className:"font-medium mt-1",children:[fe.avgClearanceTimeHrs," hrs"]})]})]}),f.jsxs("div",{className:"mt-4 text-xs text-slate-500",children:["Revenue: ",f.jsxs("span",{className:"font-medium",children:["₹ ",fe.monthRevenue.toLocaleString()]})]}),f.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Receivables: ",f.jsxs("span",{className:"font-medium",children:["₹ ",fe.outstandingReceivables.toLocaleString()]})]})]}),f.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-slate-100",children:[f.jsx("h3",{className:"text-sm font-medium text-slate-800",children:"Owner Quick Actions"}),f.jsxs("div",{className:"mt-3 flex flex-col gap-2",children:[f.jsx("button",{onClick:()=>l("finance"),className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm text-left",children:"Open Finance"}),f.jsx("button",{onClick:()=>l("compliance"),className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm text-left",children:"Open Compliance"}),f.jsx("button",{onClick:()=>l("vendors"),className:"px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 text-sm text-left",children:"Vendors"})]})]})]}),f.jsxs("main",{className:"lg:col-span-2 space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"flex-1",children:f.jsx("input",{value:n,onChange:e=>{i(e.target.value),o(1)},placeholder:"Search features or accounts...",className:"w-full px-4 py-3 rounded-xl border border-slate-200 bg-white shadow-sm focus:outline-none"})}),f.jsxs("div",{className:"ml-4 hidden sm:block text-sm text-slate-500",children:["Showing ","commercial"===s?p.length:x.length]})]}),f.jsx("nav",{className:"mb-2",children:f.jsx("div",{className:"flex flex-wrap gap-2",children:Object.values(Ne).map(e=>f.jsx("button",{onClick:()=>{l(e.id),o(1)},className:"px-3 py-2 rounded-xl text-sm "+(s===e.id?"bg-indigo-600 text-white":"bg-white text-slate-700 border border-slate-200"),children:e.title},e.id))})}),f.jsxs("section",{children:["operations"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800",children:"Operations Oversight"}),f.jsx("div",{className:"text-sm text-slate-500",children:"Filings, cut-offs and SLA health"})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"On-time filings"}),f.jsx("div",{className:"text-2xl font-semibold mt-2",children:"92%"})]}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Slot availability"}),f.jsx("div",{className:"text-2xl font-semibold mt-2",children:"78%"})]})]})]}),"finance"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800",children:"Finance & Billing"}),f.jsx("div",{className:"text-sm text-slate-500",children:"Receivables & cashflow"})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"text-xs text-slate-500 uppercase",children:[f.jsx("th",{className:"px-3 py-2",children:"Client"}),f.jsx("th",{className:"px-3 py-2",children:"Outstanding"}),f.jsx("th",{className:"px-3 py-2",children:"Last Active"}),f.jsx("th",{className:"px-3 py-2",children:"Status"}),f.jsx("th",{className:"px-3 py-2"})]})}),f.jsx("tbody",{children:p.slice(6*(c-1),6*c).map(e=>f.jsxs("tr",{className:"border-t",children:[f.jsx("td",{className:"px-3 py-3 text-sm text-slate-700",children:e.name}),f.jsxs("td",{className:"px-3 py-3 text-sm text-slate-700",children:["₹ ",e.outstanding.toLocaleString()]}),f.jsx("td",{className:"px-3 py-3 text-sm text-slate-500",children:e.lastActive}),f.jsx("td",{className:"px-3 py-3 text-sm",children:f.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("Active"===e.status?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800"),children:e.status})}),f.jsx("td",{className:"px-3 py-3 text-right",children:f.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[f.jsx("button",{onClick:()=>d(e),className:"text-sm px-2 py-1 rounded-lg bg-indigo-50 text-indigo-700",children:"Open"}),f.jsx("button",{onClick:()=>u([e],["id","name","outstanding","lastActive","status"],`account_${e.id}.csv`),className:"text-sm px-2 py-1 rounded-lg bg-slate-100 text-slate-700",children:"Export"})]})})]},e.id))})]})}),f.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[f.jsxs("div",{className:"text-sm text-slate-500",children:["Page ",c," of ",Math.max(1,Math.ceil(p.length/6))]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>o(e=>Math.max(1,e-1)),className:"px-3 py-1 rounded-xl bg-white border border-slate-200",children:"Prev"}),f.jsx("button",{onClick:()=>o(e=>Math.min(Math.max(1,Math.ceil(p.length/6)),e+1)),className:"px-3 py-1 rounded-xl bg-white border border-slate-200",children:"Next"})]})]})]}),"compliance"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Compliance"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Bonds, audits and customs compliance status."}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Active BGs"}),f.jsx("div",{className:"text-2xl font-semibold mt-2",children:"14"})]}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Pending Audit Items"}),f.jsx("div",{className:"text-2xl font-semibold mt-2",children:"3"})]})]})]}),"vendors"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Vendors & Partners"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"C&F agents, port handlers and SLAs."}),f.jsx("div",{className:"space-y-3",children:f.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm font-medium",children:"Oceanic CNF — SLA 98%"}),f.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Contact: +91-9876543210"})]})})]}),"reports"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Reports & KPIs"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Export management reports and KPI packs."}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>h(),className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"Export KPIs"}),f.jsx("button",{onClick:()=>alert("Open detailed report UI"),className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Open Reports"})]})]}),"risk"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Risk & Guarantees"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Monitor BG expiries, insurance and claims exposure."}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-700",children:"BGs expiring within 90 days: 2"}),f.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Claims open: 1"})]})]}),"tech"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Technology"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"API status, integrations and telemetry."}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Customs API"}),f.jsx("div",{className:"text-sm font-medium mt-1",children:"Connected"})]}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Billing System"}),f.jsx("div",{className:"text-sm font-medium mt-1",children:"Synced"})]})]})]})]})]})]})]}),r&&f.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[f.jsx("div",{onClick:()=>d(null),className:"absolute inset-0 bg-black/40"}),f.jsx("div",{className:"relative w-full sm:max-w-2xl mx-4 sm:mx-0 bg-white rounded-t-2xl sm:rounded-2xl shadow-lg overflow-auto",style:{maxHeight:"90vh"},children:f.jsxs("div",{className:"p-4 sm:p-6",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:r.name||r.title}),f.jsx("p",{className:"text-sm text-slate-500 mt-1",children:r.id||r.short})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>t("/signup"),className:"px-3 py-2 rounded-lg bg-white border border-slate-200 text-sm",children:"Home"}),f.jsx("button",{onClick:()=>d(null),className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Close"})]})]}),f.jsx("div",{className:"mt-4 text-sm text-slate-600",children:void 0!==r.outstanding?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"mb-2",children:["Outstanding: ",f.jsxs("span",{className:"font-medium",children:["₹ ",r.outstanding.toLocaleString()]})]}),f.jsxs("div",{className:"mb-2",children:["Last Active: ",f.jsx("span",{className:"font-medium",children:r.lastActive})]}),f.jsxs("div",{className:"mb-2",children:["Status: ",f.jsx("span",{className:"font-medium",children:r.status})]})]}):f.jsx("p",{children:r.short||"Details not available."})}),f.jsxs("div",{className:"mt-6 flex gap-2",children:[f.jsx("button",{onClick:()=>{r&&r.id?u([r],["id","name","outstanding","lastActive","status"],`account_${r.id}.csv`):h()},className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"Export"}),f.jsx("button",{onClick:()=>d(null),className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Close"})]})]})})]})]})}const we={clearances:{id:"clearances",title:"Clearance Orders",short:"Manage clearance jobs and statuses"},manifests:{id:"manifests",title:"Manifests",short:"Create and submit manifests to port/customs"},filings:{id:"filings",title:"Customs Filings",short:"Track declarations, HSN, and filing status"},schedules:{id:"schedules",title:"Vessel / Flight Schedules",short:"View ETAs, cut-offs and slot bookings"},vendors:{id:"vendors",title:"Vendors & CNF",short:"Manage C&F agents, forwarders and vendors"},billing:{id:"billing",title:"Billing & Claims",short:"Client invoicing, duty charges and claims"},reports:{id:"reports",title:"Reports",short:"Aging, cash flow and customs reports"},settings:{id:"settings",title:"Settings",short:"System settings, integrations and webhooks"}},Ce=Array.from({length:20}).map((e,t)=>({id:`CL-${4e3+t}`,refNo:`REF-${700+t}`,client:["A1 Traders","Oceanex","TransGlobal"][t%3],status:["Pending","Filed","Cleared","Hold"][t%4],duty:100*(Math.floor(200*Math.random())+30),eta:"2025-11-"+(t%28+1)}));function ke(){const t=a(),[s,l]=e.useState("clearances"),[n,i]=e.useState(""),[r,d]=e.useState(null),[c,o]=e.useState(1),m=e.useMemo(()=>{const e=n.trim().toLowerCase();return e?Ce.filter(t=>t.id.toLowerCase().includes(e)||t.refNo.toLowerCase().includes(e)||t.client.toLowerCase().includes(e)||t.status.toLowerCase().includes(e)||String(t.duty).includes(e)):Ce},[n]),x=Math.max(1,Math.ceil(m.length/8)),p=m.slice(8*(c-1),8*c);function h(e=m,t="clearances.csv"){const s=e.map(e=>`${e.id},${e.refNo},${e.client},${e.status},${e.duty},${e.eta}`),a=new Blob([["id,refNo,client,status,duty,eta",...s].join("\n")],{type:"text/csv;charset=utf-8"}),l=URL.createObjectURL(a),n=document.createElement("a");n.href=l,n.download=t,document.body.appendChild(n),n.click(),n.remove(),URL.revokeObjectURL(l)}return f.jsxs("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-6 lg:p-10",children:[f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsxs("header",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[f.jsx("div",{children:f.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-slate-800",children:"Clearance Agent — Admin"})}),f.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[f.jsx("input",{value:n,onChange:e=>{i(e.target.value),o(1)},placeholder:"Search id, ref, client, status...",className:"flex-1 sm:flex-none px-3 py-2 rounded-xl border border-slate-200 bg-white shadow-sm focus:outline-none"}),f.jsx("button",{onClick:()=>h(),className:"ml-2 px-3 py-2 rounded-xl bg-indigo-600 text-white text-sm",children:"Export"}),f.jsx("button",{onClick:function(){const e=Object.values(we).map(e=>`- ${e.title}: ${e.short}`).join("\n"),t=new Blob([`Clearance Agent Admin Specification\n\n${e}`],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="clearance_agent_admin_spec.txt",document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(s)},className:"ml-2 px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm",children:"Specification"}),f.jsx("button",{onClick:()=>t("/signup"),className:"ml-2 px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm",children:"Home"})]})]}),f.jsx("nav",{className:"mb-6",children:f.jsx("div",{className:"flex flex-wrap gap-3",children:Object.values(we).map(e=>f.jsx("button",{onClick:()=>{l(e.id),o(1)},className:"px-3 py-2 rounded-xl text-sm "+(s===e.id?"bg-indigo-600 text-white":"bg-white text-slate-700 border border-slate-200"),children:e.title},e.id))})}),f.jsxs("section",{children:["clearances"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800",children:"Clearance Orders"}),f.jsxs("div",{className:"text-sm text-slate-500",children:["Total ",m.length]})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"text-xs text-slate-500 uppercase",children:[f.jsx("th",{className:"px-3 py-2",children:"ID"}),f.jsx("th",{className:"px-3 py-2",children:"Ref"}),f.jsx("th",{className:"px-3 py-2",children:"Client"}),f.jsx("th",{className:"px-3 py-2",children:"Status"}),f.jsx("th",{className:"px-3 py-2",children:"Duty"}),f.jsx("th",{className:"px-3 py-2",children:"ETA"}),f.jsx("th",{className:"px-3 py-2"})]})}),f.jsx("tbody",{children:p.map(e=>f.jsxs("tr",{className:"border-t",children:[f.jsx("td",{className:"px-3 py-3 text-sm text-slate-700",children:e.id}),f.jsx("td",{className:"px-3 py-3 text-sm text-slate-700",children:e.refNo}),f.jsx("td",{className:"px-3 py-3 text-sm text-slate-700",children:e.client}),f.jsx("td",{className:"px-3 py-3 text-sm",children:f.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("Cleared"===e.status?"bg-green-100 text-green-800":"Filed"===e.status?"bg-amber-100 text-amber-800":"Hold"===e.status?"bg-rose-100 text-rose-700":"bg-sky-100 text-sky-800"),children:e.status})}),f.jsxs("td",{className:"px-3 py-3 text-sm text-slate-700",children:["₹ ",e.duty.toLocaleString()]}),f.jsx("td",{className:"px-3 py-3 text-sm text-slate-500",children:e.eta}),f.jsx("td",{className:"px-3 py-3 text-right",children:f.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[f.jsx("button",{onClick:()=>d(e),className:"text-sm px-2 py-1 rounded-lg bg-indigo-50 text-indigo-700",children:"View"}),f.jsx("button",{onClick:()=>alert("Open filing flow - implement API"),className:"text-sm px-2 py-1 rounded-lg bg-slate-100 text-slate-700",children:"File"})]})})]},e.id))})]})}),f.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[f.jsxs("div",{className:"text-sm text-slate-500",children:["Page ",c," of ",x]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>o(e=>Math.max(1,e-1)),className:"px-3 py-1 rounded-xl bg-white border border-slate-200",children:"Prev"}),f.jsx("button",{onClick:()=>o(e=>Math.min(x,e+1)),className:"px-3 py-1 rounded-xl bg-white border border-slate-200",children:"Next"})]})]})]}),"manifests"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Manifests"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Create, edit and submit manifests to port/customs."}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Pending Submission"}),f.jsx("div",{className:"text-2xl font-semibold mt-2",children:"6"})]}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Submitted Today"}),f.jsx("div",{className:"text-2xl font-semibold mt-2",children:"3"})]})]})]}),"filings"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Customs Filings"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Track declarations, HSN mapping and filing statuses."}),f.jsx("div",{className:"space-y-3",children:f.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm font-medium",children:"Latest Filing: REF-712"}),f.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Status: Filed • 2025-11-17"})]})})]}),"schedules"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Vessel / Flight Schedules"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"ETAs, cut-offs and slot availability."}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Next Vessel"}),f.jsx("div",{className:"text-sm font-medium mt-1",children:"MV OCEANIC — ETA 2025-11-21 • Cut-off 2025-11-20"})]}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Next Flight"}),f.jsx("div",{className:"text-sm font-medium mt-1",children:"FL 908 — ETA 2025-11-19 • Cut-off 2025-11-18"})]})]})]}),"vendors"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Vendors & CNF"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Manage C&F agents, forwarders and vendors."}),f.jsx("div",{className:"space-y-3",children:f.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm font-medium",children:"Oceanic CNF"}),f.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Contact: +91-9876543210"})]})})]}),"billing"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Billing & Claims"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Issue client invoices, duty billing and manage claims."}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>h(),className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"Export Billing"}),f.jsx("button",{onClick:()=>alert("Open claims UI"),className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Claims"})]})]}),"reports"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Reports"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Aging, duty summary and customs reports."}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"Aging Report"}),f.jsx("button",{className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Duty Summary"})]})]}),"settings"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Settings"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Integrations, user roles and webhooks."}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl",children:[f.jsx("input",{type:"checkbox",defaultChecked:!0}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium",children:"Enable Customs API"}),f.jsx("div",{className:"text-xs text-slate-500",children:"Push filings automatically"})]})]}),f.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl",children:[f.jsx("input",{type:"checkbox"}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium",children:"Enable Auto Billing"}),f.jsx("div",{className:"text-xs text-slate-500",children:"Generate invoices on clearance"})]})]})]})]})]})]}),r&&f.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[f.jsx("div",{onClick:()=>d(null),className:"absolute inset-0 bg-black/40"}),f.jsx("div",{className:"relative w-full sm:max-w-md mx-4 sm:mx-0 bg-white rounded-t-2xl sm:rounded-2xl shadow-lg overflow-auto",style:{maxHeight:"90vh"},children:f.jsxs("div",{className:"p-4 sm:p-6",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:r.id}),f.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[r.refNo," • ",r.client]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>t("/signup"),className:"px-3 py-2 rounded-lg bg-white border border-slate-200 text-sm",children:"Home"}),f.jsx("button",{onClick:()=>d(null),className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Close"})]})]}),f.jsxs("div",{className:"mt-4 text-sm text-slate-600",children:[f.jsxs("div",{className:"mb-2",children:["Status: ",f.jsx("span",{className:"font-medium",children:r.status})]}),f.jsxs("div",{className:"mb-2",children:["Duty: ",f.jsxs("span",{className:"font-medium",children:["₹ ",r.duty.toLocaleString()]})]}),f.jsxs("div",{className:"mb-2",children:["ETA: ",f.jsx("span",{className:"font-medium",children:r.eta})]}),f.jsx("div",{className:"mt-3 text-xs text-slate-500",children:"Use the File action to submit declaration, or the Pay action to settle duties."})]}),f.jsxs("div",{className:"mt-6 flex gap-2",children:[f.jsx("button",{onClick:()=>h([r],`clearance_${r.id}.csv`),className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"Export"}),f.jsx("button",{onClick:()=>d(null),className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Close"})]})]})})]})]})}const Se=[{id:"fumigation",title:"FUMIGATION CERTIFICATE",description:"Certificate confirming fumigation treatment for export goods.",fields:[{name:"date",label:"Date",type:"date"},{name:"consignor",label:"Consignor / Exporter",type:"text"},{name:"consignee",label:"Consignee / Importer",type:"text"},{name:"vessel",label:"Vessel / Flight",type:"text"},{name:"voyage",label:"Voyage / Flight No.",type:"text"},{name:"packages",label:"Packages (count / description)",type:"textarea"},{name:"grossWeight",label:"Gross Weight",type:"text"},{name:"fumigant",label:"Fumigant Used",type:"text"},{name:"treatmentDate",label:"Treatment Date",type:"date"},{name:"certificateNo",label:"Certificate No.",type:"text"},{name:"issuer",label:"Issued By (Company / Officer)",type:"text"}],templateBody:'<h2>Fumigation Certificate</h2>\n<p>Date: {{date}}</p>\n<p>Certificate No: <strong>{{certificateNo}}</strong></p>\n<p>Consignor: {{consignor}}</p>\n<p>Consignee: {{consignee}}</p>\n<p>Vessel / Flight: {{vessel}} • Voyage/Flight: {{voyage}}</p>\n<p>Packages / Description: <pre style="white-space:pre-wrap;">{{packages}}</pre></p>\n<p>Gross Weight: {{grossWeight}}</p>\n<p>Fumigant: {{fumigant}} — Treatment Date: {{treatmentDate}}</p>\n<p>Issued By: {{issuer}}</p>\n<p>Declaration: This is to certify that the above consignment has been fumigated in accordance with the relevant phytosanitary requirements.</p>'},{id:"apeda_spice_board",title:"APEDA / SPICE BOARD CERTIFICATE",description:"APEDA / Spice Board / Industry-specific certificate template.",fields:[{name:"date",label:"Date",type:"date"},{name:"exporter",label:"Exporter",type:"text"},{name:"consignee",label:"Consignee",type:"text"},{name:"product",label:"Product Description",type:"text"},{name:"hsCode",label:"HS Code",type:"text"},{name:"quantity",label:"Quantity",type:"text"},{name:"netWeight",label:"Net Weight",type:"text"},{name:"lot",label:"Lot / Batch No.",type:"text"},{name:"certificateNo",label:"Certificate No.",type:"text"},{name:"authority",label:"Issuing Authority",type:"text"}],templateBody:"<h2>APEDA / Spice Board Certificate</h2>\n<p>Date: {{date}}</p>\n<p>Certificate No: <strong>{{certificateNo}}</strong></p>\n<p>Exporter: {{exporter}}</p>\n<p>Consignee: {{consignee}}</p>\n<p>Product: {{product}} (HS: {{hsCode}})</p>\n<p>Quantity: {{quantity}} • Net Weight: {{netWeight}}</p>\n<p>Lot / Batch: {{lot}}</p>\n<p>Authority: {{authority}}</p>\n<p>Declaration: This certificate is issued under the authority of the relevant board and confirms that the consignment complies with applicable standards.</p>"},{id:"draft_bill_of_lading",title:"DRAFT BILL OF LADING",description:"Draft bill of lading for review before original issuance.",fields:[{name:"date",label:"Date",type:"date"},{name:"shipper",label:"Shipper",type:"text"},{name:"consignee",label:"Consignee",type:"text"},{name:"notifyParty",label:"Notify Party",type:"text"},{name:"vessel",label:"Vessel",type:"text"},{name:"voyage",label:"Voyage",type:"text"},{name:"portLoading",label:"Port of Loading",type:"text"},{name:"portDischarge",label:"Port of Discharge",type:"text"},{name:"marks",label:"Marks & Nos",type:"textarea"},{name:"descriptionGoods",label:"Description of Goods",type:"textarea"},{name:"containers",label:"Container Nos",type:"text"},{name:"grossWeight",label:"Gross Weight",type:"text"},{name:"shipperRef",label:"Shipper's Reference",type:"text"}],templateBody:'<h2>Draft Bill of Lading</h2>\n<p>Date: {{date}}</p>\n<p>Shipper: {{shipper}}</p>\n<p>Consignee: {{consignee}}</p>\n<p>Notify Party: {{notifyParty}}</p>\n<p>Vessel / Voyage: {{vessel}} / {{voyage}}</p>\n<p>Port of Loading: {{portLoading}} • Port of Discharge: {{portDischarge}}</p>\n<p>Marks & Nos: <pre style="white-space:pre-wrap;">{{marks}}</pre></p>\n<p>Description of Goods: <pre style="white-space:pre-wrap;">{{descriptionGoods}}</pre></p>\n<p>Container Nos: {{containers}}</p>\n<p>Gross Weight: {{grossWeight}}</p>\n<p>Shipper Ref: {{shipperRef}}</p>'},{id:"draft_certificate_of_origin",title:"DRAFT CERTIFICATE OF ORIGIN",description:"Draft certificate of origin for review (exporter's declaration).",fields:[{name:"date",label:"Date",type:"date"},{name:"exporter",label:"Exporter",type:"text"},{name:"consignee",label:"Consignee",type:"text"},{name:"countryOrigin",label:"Country of Origin",type:"text"},{name:"product",label:"Product Description",type:"text"},{name:"hsCode",label:"HS Code",type:"text"},{name:"quantity",label:"Quantity",type:"text"},{name:"invoiceNo",label:"Invoice No.",type:"text"},{name:"declarationBy",label:"Declared By (Name/Title)",type:"text"}],templateBody:"<h2>Draft Certificate of Origin</h2>\n<p>Date: {{date}}</p>\n<p>Exporter: {{exporter}}</p>\n<p>Consignee: {{consignee}}</p>\n<p>Product: {{product}} (HS: {{hsCode}})</p>\n<p>Quantity: {{quantity}} • Invoice: {{invoiceNo}}</p>\n<p>Country of Origin: {{countryOrigin}}</p>\n<p>Declaration: I hereby certify that the goods described above originate in {{countryOrigin}}.</p>\n<p>Declared By: {{declarationBy}}</p>"},{id:"draft_shipping_bill",title:"DRAFT SHIPPING BILL",description:"Draft shipping bill used for export customs filing (draft).",fields:[{name:"date",label:"Date",type:"date"},{name:"exporter",label:"Exporter",type:"text"},{name:"beneficiary",label:"Beneficiary",type:"text"},{name:"invoiceNo",label:"Invoice No.",type:"text"},{name:"shipperRef",label:"Shipper Ref",type:"text"},{name:"portOfLoading",label:"Port of Loading",type:"text"},{name:"portOfDestination",label:"Port of Destination",type:"text"},{name:"itemDetails",label:"Items / HS / Qty",type:"textarea"},{name:"grossWeight",label:"Gross Weight",type:"text"},{name:"freight",label:"Freight Terms",type:"text"}],templateBody:'<h2>Draft Shipping Bill</h2>\n<p>Date: {{date}}</p>\n<p>Exporter: {{exporter}}</p>\n<p>Beneficiary: {{beneficiary}}</p>\n<p>Invoice No: {{invoiceNo}} • Shipper Ref: {{shipperRef}}</p>\n<p>Port of Loading: {{portOfLoading}} • Destination: {{portOfDestination}}</p>\n<p>Items / HS / Qty: <pre style="white-space:pre-wrap;">{{itemDetails}}</pre></p>\n<p>Gross Weight: {{grossWeight}}</p>\n<p>Freight: {{freight}}</p>'},{id:"original_shipping_bill",title:"ORIGINAL SHIPPING BILL",description:"Finalized shipping bill for customs export (original).",fields:[{name:"date",label:"Date",type:"date"},{name:"exporter",label:"Exporter",type:"text"},{name:"consignee",label:"Consignee",type:"text"},{name:"shippingBillNo",label:"Shipping Bill No.",type:"text"},{name:"invoiceNo",label:"Invoice No.",type:"text"},{name:"hsDetails",label:"HS / Item Details",type:"textarea"},{name:"packages",label:"Packages",type:"text"},{name:"netWeight",label:"Net Weight",type:"text"},{name:"declaration",label:"Declaration / Remarks",type:"textarea"}],templateBody:'<h2>Original Shipping Bill</h2>\n<p>Date: {{date}}</p>\n<p>Shipping Bill No: {{shippingBillNo}}</p>\n<p>Exporter: {{exporter}}</p>\n<p>Consignee: {{consignee}}</p>\n<p>Invoice: {{invoiceNo}}</p>\n<p>HS & Item Details: <pre style="white-space:pre-wrap;">{{hsDetails}}</pre></p>\n<p>Packages: {{packages}} • Net Weight: {{netWeight}}</p>\n<p>Declaration / Remarks: <pre style="white-space:pre-wrap;">{{declaration}}</pre></p>'},{id:"original_bill_of_lading",title:"ORIGINAL BILL OF LADING",description:"Final original bill of lading issued by carrier/agent.",fields:[{name:"date",label:"Date",type:"date"},{name:"shipper",label:"Shipper",type:"text"},{name:"consignee",label:"Consignee",type:"text"},{name:"notifyParty",label:"Notify Party",type:"text"},{name:"blNumber",label:"B/L Number",type:"text"},{name:"vessel",label:"Vessel",type:"text"},{name:"voyage",label:"Voyage",type:"text"},{name:"containerNos",label:"Container Nos",type:"text"},{name:"descriptionGoods",label:"Description of Goods",type:"textarea"},{name:"grossWeight",label:"Gross Weight",type:"text"},{name:"placeOfIssue",label:"Place of Issue",type:"text"},{name:"carrierSign",label:"Carrier / Agent Signatory",type:"text"}],templateBody:'<h2>Original Bill of Lading</h2>\n<p>Date: {{date}}</p>\n<p>B/L Number: {{blNumber}}</p>\n<p>Shipper: {{shipper}}</p>\n<p>Consignee: {{consignee}}</p>\n<p>Notify Party: {{notifyParty}}</p>\n<p>Vessel / Voyage: {{vessel}} / {{voyage}}</p>\n<p>Container Nos: {{containerNos}}</p>\n<p>Description of Goods: <pre style="white-space:pre-wrap;">{{descriptionGoods}}</pre></p>\n<p>Gross Weight: {{grossWeight}}</p>\n<p>Place of Issue: {{placeOfIssue}}</p>\n<p>Carrier / Agent: {{carrierSign}}</p>'},{id:"original_certificate_of_origin",title:"ORIGINAL CERTIFICATE OF ORIGIN",description:"Final certificate of origin for customs and trade preference.",fields:[{name:"date",label:"Date",type:"date"},{name:"exporter",label:"Exporter",type:"text"},{name:"consignee",label:"Consignee",type:"text"},{name:"product",label:"Product",type:"text"},{name:"hsCode",label:"HS Code",type:"text"},{name:"quantity",label:"Quantity",type:"text"},{name:"countryOrigin",label:"Country of Origin",type:"text"},{name:"certificateNo",label:"Certificate No.",type:"text"},{name:"authorizedSign",label:"Authorized Signatory",type:"text"}],templateBody:"<h2>Original Certificate of Origin</h2>\n<p>Date: {{date}}</p>\n<p>Certificate No: {{certificateNo}}</p>\n<p>Exporter: {{exporter}}</p>\n<p>Consignee: {{consignee}}</p>\n<p>Product: {{product}} (HS: {{hsCode}})</p>\n<p>Quantity: {{quantity}}</p>\n<p>Country of Origin: {{countryOrigin}}</p>\n<p>Authorized Signatory: {{authorizedSign}}</p>\n<p>Declaration: This certificate attests to the origin of the goods for customs purposes.</p>"}];function Re(e,t={}){return e?e.replace(/{{\s*([^}]+)\s*}}/g,(e,s)=>{const a=s.trim();return null==(l=t[a]??"")?"":String(l).replace(/</g,"&lt;").replace(/>/g,"&gt;");var l}):""}function Le(e=""){try{const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}catch{return String(e).replace(/<[^>]*>/g,"")}}function Oe(){const t=a(),{user:s,token:l}=e.useContext(A),[n,i]=e.useState(Se),[r,d]=e.useState(Se[0].id),c=e.useMemo(()=>n.find(e=>e.id===r)||n[0],[n,r]),[o,m]=e.useState({}),[x,p]=e.useState(""),[h,u]=e.useState(!1),[g,b]=e.useState(null),[j,N]=e.useState(!0);function v(e,t){const s={...o,[e]:t};m(s);try{p(Re(c.templateBody,s))}catch{p("")}}return e.useEffect(()=>{let e=!0;return async function(){try{const t=(null==s?void 0:s.token)||l||localStorage.getItem("token"),{status:a,body:n}=await P("/api/templates",t);if(!e)return;a>=200&&a<300&&Array.isArray(n)&&n.length>0&&(i(n),d(n[0].id))}catch(t){}}(),()=>e=!1},[s,l]),e.useEffect(()=>{if(!c)return;const e={};(c.fields||[]).forEach(t=>{e[t.name]="date"===t.type?(new Date).toISOString().slice(0,10):""}),m(e),p(Re(c.templateBody||"",e)),b(null)},[c]),f.jsx("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-6 lg:p-10",children:f.jsxs("div",{className:"max-w-6xl mx-auto bg-white rounded-2xl p-6 shadow",children:[f.jsxs("header",{className:"flex items-start justify-between gap-4 mb-6",children:[f.jsx("div",{children:f.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-slate-800",children:" Clearance Agent Documentation"})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:function(){const e=[`Template: ${c.title}`,c.description||"","","Fields:",...(c.fields||[]).map(e=>`- ${e.name} (${e.type})`)].join("\n"),t=new Blob([e],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`${c.id}_spec.txt`,document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(s)},className:"px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm",children:"Specification"}),f.jsx("button",{onClick:()=>t("/signup"),className:"px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm",children:"Home"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[f.jsx("aside",{className:"col-span-1 space-y-4",children:f.jsxs("div",{className:"p-4 border rounded bg-white",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Account"}),f.jsx("div",{className:"font-medium",children:(null==s?void 0:s.name)||(null==s?void 0:s.email)||"—"})]}),f.jsx("div",{className:"text-xs text-slate-400",children:(null==s?void 0:s.role)||"—"})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-semibold mb-2",children:"Templates"}),f.jsx("ul",{className:"space-y-2 max-h-64 overflow-auto",children:n.map(e=>f.jsx("li",{children:f.jsx("button",{onClick:()=>d(e.id),className:"w-full text-left p-3 rounded "+(e.id===r?"bg-indigo-50 border border-indigo-200":"hover:bg-gray-50"),children:f.jsxs("div",{className:"flex justify-between",children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-medium",children:e.title}),f.jsx("div",{className:"text-xs text-slate-500",children:e.description})]}),f.jsx("div",{className:"text-xs text-slate-400",children:(e.fields||[]).length})]})})},e.id))})]})]})}),f.jsxs("main",{className:"lg:col-span-2 space-y-4",children:[f.jsxs("div",{className:"p-4 border rounded bg-white",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Fill"}),f.jsx("div",{className:"font-semibold",children:null==c?void 0:c.title})]}),f.jsx("div",{className:"text-xs text-slate-400",children:null==c?void 0:c.description})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:((null==c?void 0:c.fields)||[]).map(e=>f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-slate-600 mb-1 block",children:e.label}),"textarea"===e.type?f.jsx("textarea",{value:o[e.name]||"",onChange:t=>v(e.name,t.target.value),rows:4,className:"w-full border rounded p-2 text-sm"}):f.jsx("input",{value:o[e.name]||"",onChange:t=>v(e.name,t.target.value),type:"date"===e.type?"date":"text",className:"w-full border rounded p-2 text-sm"})]},e.name))}),f.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 items-center",children:[f.jsx("button",{onClick:()=>{const e={};(c.fields||[]).forEach(t=>e[t.name]="date"===t.type?(new Date).toISOString().slice(0,10):""),m(e),p(Re(c.templateBody,e))},className:"px-3 py-2 bg-gray-200 rounded text-sm",children:"Reset"}),f.jsx("button",{onClick:()=>{const e=new Blob([x],{type:"text/html"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download=`${c.id||"doc"}_${Date.now()}.html`,s.click(),URL.revokeObjectURL(t)},className:"px-3 py-2 bg-indigo-600 text-white rounded text-sm",children:"Download HTML"}),f.jsx("button",{onClick:()=>{const e=Le(x),t=new Blob([e],{type:"text/plain"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`${c.id||"doc"}_${Date.now()}.txt`,a.click(),URL.revokeObjectURL(s)},className:"px-3 py-2 bg-gray-200 rounded text-sm",children:"Download TXT"}),f.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(Le(x)),b({type:"success",text:"Copied to clipboard"})}catch{b({type:"error",text:"Copy failed"})}setTimeout(()=>b(null),2e3)},className:"px-3 py-2 bg-green-600 text-white rounded text-sm",children:"Copy to Clipboard"})]})]}),f.jsxs("div",{className:"p-4 border rounded bg-white",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-semibold",children:"Share / Email"}),f.jsx("div",{className:"text-xs text-slate-500",children:"Send the selected document to recipients"})]}),f.jsxs("div",{className:"text-xs text-slate-400",children:["Attach HTML:"," ",f.jsx("input",{type:"checkbox",checked:j,onChange:e=>N(e.target.checked),className:"ml-2"})]})]}),f.jsx(De,{onSend:async function({to:e,subject:t}){if(!e||!e.includes("@"))return b({type:"error",text:"Enter valid recipient email."}),void setTimeout(()=>b(null),3e3);u(!0),b(null);try{const a=(null==s?void 0:s.token)||l||localStorage.getItem("token");if(j){const s=Re(c.templateBody||"",o),l=new FormData;l.append("to",e),l.append("subject",t||c.title||"Document"),l.append("templateId",c.id),l.append("values",JSON.stringify(o)),l.append("file",new Blob([s],{type:"text/html"}),`${c.id}.html`);const n={method:"POST",body:l,headers:{}};a&&(n.headers.Authorization=`Bearer ${a}`);const i=await fetch("/api/templates/send",n),r=await i.json().catch(()=>null);if(i.ok)b({type:"success",text:(null==r?void 0:r.message)||"Email sent (server)."});else{const a=Le(s);window.open(`mailto:${encodeURIComponent(e)}?subject=${encodeURIComponent(t||c.title)}&body=${encodeURIComponent(a)}`,"_blank"),b({type:"warning",text:"Server failed — mail client opened."})}}else{const s={to:e,subject:t||c.title,templateId:c.id,values:o},{status:l,body:n}=await D("/api/templates/send",s,a);if(l>=200&&l<300&&!1!==(null==n?void 0:n.ok))b({type:"success",text:(null==n?void 0:n.message)||"Email queued / sent."});else{const s=Le(Re(c.templateBody||"",o));window.open(`mailto:${encodeURIComponent(e)}?subject=${encodeURIComponent(t||c.title)}&body=${encodeURIComponent(s)}`,"_blank"),b({type:"warning",text:"Server failed — mail client opened."})}}}catch(a){try{const s=Le(Re(c.templateBody||"",o));window.open(`mailto:${encodeURIComponent(e)}?subject=${encodeURIComponent(t||c.title)}&body=${encodeURIComponent(s)}`,"_blank"),b({type:"warning",text:"Network error — mail client opened."})}catch{b({type:"error",text:"Unable to send email."})}}finally{u(!1),setTimeout(()=>b(null),3e3)}},disabled:h,defaultTo:(null==s?void 0:s.email)||""})]})]}),f.jsx("aside",{className:"col-span-1",children:f.jsxs("div",{className:"p-4 border rounded bg-white",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsx("div",{className:"font-semibold",children:"Preview"}),f.jsx("div",{className:"text-xs text-slate-400",children:"Live"})]}),f.jsx("div",{className:"border p-3 rounded bg-white max-h-[60vh] overflow-auto",dangerouslySetInnerHTML:{__html:x}}),g&&f.jsx("div",{className:"mt-3 p-2 rounded text-sm "+("success"===g.type?"bg-green-50 text-green-700":"error"===g.type?"bg-red-50 text-red-700":"bg-yellow-50 text-yellow-700"),children:g.text})]})})]})]})})}function De({onSend:t,disabled:s=!1,defaultTo:a=""}){const[l,n]=e.useState(a),[i,r]=e.useState("");return e.useEffect(()=>n(a),[a]),f.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[f.jsx("input",{value:l,onChange:e=>n(e.target.value),placeholder:"to@example.com",className:"w-full border rounded p-2 text-sm"}),f.jsx("input",{value:i,onChange:e=>r(e.target.value),placeholder:"Email subject",className:"w-full border rounded p-2 text-sm"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>t({to:l,subject:i}),disabled:s,className:"px-3 py-2 bg-indigo-600 text-white rounded text-sm",children:s?"Sending...":"Send Email"}),f.jsx("button",{onClick:()=>{n(a),r("")},className:"px-3 py-2 bg-gray-200 rounded text-sm",children:"Clear"})]})]})}const Pe={invoices:{id:"invoices",title:"Clearance Invoices",short:"Create and manage client/voucher invoices"},duties:{id:"duties",title:"Duties & Taxes",short:"Calculate customs duties, GST and taxes"},payables:{id:"payables",title:"Vendor Payments",short:"Manage payments to C&F, port and vendors"},receivables:{id:"receivables",title:"Collections",short:"Track client receivables and aging"},bonds:{id:"bonds",title:"Bonds & Guarantees",short:"Track BGs, bond expiries and renewals"},reconciliation:{id:"reconciliation",title:"Reconciliation",short:"Bank & customs filing reconciliation"},reports:{id:"reports",title:"Reports",short:"Aging, cash flow and customs reports"},expenses:{id:"expenses",title:"Expenses",short:"Demurrage, detention and incidental costs"}},Ae=Array.from({length:20}).map((e,t)=>({id:`CAI-${3e3+t}`,client:["A1 Traders","Oceanex","TransGlobal"][t%3],type:t%4==0?"Invoice":t%4==1?"Duty":t%4==2?"Vendor":"Expense",amount:100*(Math.floor(200*Math.random())+50),status:t%5==0?"Overdue":t%3==0?"Part Paid":"Pending",date:"2025-11-"+(t%28+1)}));function Ie(){const t=a(),[s,l]=e.useState("invoices"),[n,i]=e.useState(""),[r,d]=e.useState(null),[c,o]=e.useState(1),m=e.useMemo(()=>{const e=n.trim().toLowerCase();return e?Ae.filter(t=>t.id.toLowerCase().includes(e)||t.client.toLowerCase().includes(e)||t.type.toLowerCase().includes(e)||t.status.toLowerCase().includes(e)||String(t.amount).includes(e)):Ae},[n]),x=Math.max(1,Math.ceil(m.length/8)),p=m.slice(8*(c-1),8*c);function h(e=m,t="clearance_records.csv"){const s=e.map(e=>`${e.id},${e.client},${e.type},${e.amount},${e.status},${e.date}`),a=new Blob([["id,client,type,amount,status,date",...s].join("\n")],{type:"text/csv;charset=utf-8"}),l=URL.createObjectURL(a),n=document.createElement("a");n.href=l,n.download=t,document.body.appendChild(n),n.click(),n.remove(),URL.revokeObjectURL(l)}return f.jsxs("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-6 lg:p-8",children:[f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("header",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[f.jsx("div",{children:f.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-slate-800",children:"Clearance Agent — Accounts"})}),f.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[f.jsx("input",{value:n,onChange:e=>{i(e.target.value),o(1)},placeholder:"Search id, client, amount, status...",className:"flex-1 sm:flex-none px-3 py-2 rounded-xl border border-slate-200 bg-white shadow-sm focus:outline-none"}),f.jsx("button",{onClick:()=>h(),className:"ml-2 px-3 py-2 rounded-xl bg-indigo-600 text-white text-sm",children:"Export"}),f.jsx("button",{onClick:function(){const e=Object.values(Pe).map(e=>`- ${e.title}: ${e.short}`).join("\n"),t=new Blob([`Clearance Agent Accounts Specification\n\n${e}`],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="clearance_agent_accounts_spec.txt",document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(s)},className:"ml-2 px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm",children:"Specification"}),f.jsx("button",{onClick:()=>t("/signup"),className:"ml-2 px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm",children:"Home"})]})]}),f.jsx("nav",{className:"mb-5",children:f.jsx("div",{className:"flex flex-wrap gap-2",children:Object.values(Pe).map(e=>f.jsx("button",{onClick:()=>{l(e.id),o(1)},className:"px-3 py-2 rounded-xl text-sm "+(s===e.id?"bg-indigo-600 text-white":"bg-white text-slate-700 border border-slate-200"),children:e.title},e.id))})}),f.jsxs("section",{children:["invoices"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800",children:"Invoices & Notes"}),f.jsxs("div",{className:"text-sm text-slate-500",children:["Total ",m.length]})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"text-xs text-slate-500 uppercase",children:[f.jsx("th",{className:"px-3 py-2",children:"ID"}),f.jsx("th",{className:"px-3 py-2",children:"Client"}),f.jsx("th",{className:"px-3 py-2",children:"Type"}),f.jsx("th",{className:"px-3 py-2",children:"Amount"}),f.jsx("th",{className:"px-3 py-2",children:"Status"}),f.jsx("th",{className:"px-3 py-2",children:"Date"}),f.jsx("th",{className:"px-3 py-2"})]})}),f.jsx("tbody",{children:p.map(e=>f.jsxs("tr",{className:"border-t",children:[f.jsx("td",{className:"px-3 py-3 text-sm text-slate-700",children:e.id}),f.jsx("td",{className:"px-3 py-3 text-sm text-slate-700",children:e.client}),f.jsx("td",{className:"px-3 py-3 text-sm text-slate-600",children:e.type}),f.jsxs("td",{className:"px-3 py-3 text-sm text-slate-700",children:["₹ ",e.amount.toLocaleString()]}),f.jsx("td",{className:"px-3 py-3 text-sm",children:f.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("Overdue"===e.status?"bg-rose-100 text-rose-700":"Part Paid"===e.status?"bg-amber-100 text-amber-800":"bg-green-100 text-green-800"),children:e.status})}),f.jsx("td",{className:"px-3 py-3 text-sm text-slate-500",children:e.date}),f.jsx("td",{className:"px-3 py-3 text-right",children:f.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[f.jsx("button",{onClick:()=>d(e),className:"text-sm px-2 py-1 rounded-lg bg-indigo-50 text-indigo-700",children:"View"}),f.jsx("button",{onClick:()=>alert("Open payment flow - implement API"),className:"text-sm px-2 py-1 rounded-lg bg-slate-100 text-slate-700",children:"Pay"})]})})]},e.id))})]})}),f.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[f.jsxs("div",{className:"text-sm text-slate-500",children:["Page ",c," of ",x]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>o(e=>Math.max(1,e-1)),className:"px-3 py-1 rounded-xl bg-white border border-slate-200",children:"Prev"}),f.jsx("button",{onClick:()=>o(e=>Math.min(x,e+1)),className:"px-3 py-1 rounded-xl bg-white border border-slate-200",children:"Next"})]})]})]}),"duties"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Duties & Taxes"}),f.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Pending duty payments and recent filings."}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Pending Duty"}),f.jsx("div",{className:"text-2xl font-semibold mt-2",children:"₹ 420,000"})]}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Recent Filings"}),f.jsx("div",{className:"text-xs text-slate-600 mt-2",children:"10 declarations filed in last 7 days"})]})]})]}),"payables"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Vendor Payments"}),f.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Payments due to port, C&F and service vendors."}),f.jsx("div",{className:"space-y-3",children:f.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium",children:"Port Charges - JNPT"}),f.jsx("div",{className:"text-xs text-slate-500",children:"Due: 2025-11-21 • ₹ 88,000"})]}),f.jsx("div",{children:f.jsx("button",{className:"px-3 py-1 rounded-lg bg-indigo-600 text-white text-sm",children:"Pay"})})]})})]}),"receivables"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Collections"}),f.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Outstanding client invoices and aging."}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"Total Outstanding"}),f.jsx("div",{className:"text-2xl font-semibold mt-2",children:"₹ 1,020,000"})]}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-500",children:"60 Days"}),f.jsx("div",{className:"text-2xl font-semibold mt-2",children:"₹ 210,000"})]})]})]}),"bonds"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Bonds & Guarantees"}),f.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Track bank guarantees and bond expiries."}),f.jsx("div",{className:"space-y-3",children:f.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm font-medium",children:"BG - 2024/12345"}),f.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Expiry: 2026-01-12"})]})})]}),"reconciliation"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Reconciliation"}),f.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Bank & customs filing reconciliation status."}),f.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm text-slate-700",children:"Unmatched transactions: 9"}),f.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Last reconciled: 2025-11-12"})]})]}),"reports"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Reports"}),f.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Aging, customs and cash flow exports."}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"Aging Report"}),f.jsx("button",{className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Customs Report"})]})]}),"expenses"===s&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Expenses"}),f.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Demurrage, detention and incidental costs."}),f.jsx("div",{className:"space-y-3",children:f.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[f.jsx("div",{className:"text-sm font-medium",children:"Demurrage - Container ABC"}),f.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"₹ 12,800 • 2025-11-10"})]})})]})]})]}),r&&f.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[f.jsx("div",{onClick:()=>d(null),className:"absolute inset-0 bg-black/40"}),f.jsx("div",{className:"relative w-full sm:max-w-md mx-4 sm:mx-0 bg-white rounded-t-2xl sm:rounded-2xl shadow-lg overflow-auto",style:{maxHeight:"90vh"},children:f.jsxs("div",{className:"p-4 sm:p-6",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:r.id}),f.jsx("p",{className:"text-sm text-slate-500 mt-1",children:r.client})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>t("/signup"),className:"px-3 py-2 rounded-lg bg-white border border-slate-200 text-sm",children:"Home"}),f.jsx("button",{onClick:()=>d(null),className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Close"})]})]}),f.jsxs("div",{className:"mt-4 text-sm text-slate-600",children:[f.jsxs("div",{className:"mb-2",children:["Type: ",f.jsx("span",{className:"font-medium",children:r.type})]}),f.jsxs("div",{className:"mb-2",children:["Amount: ",f.jsxs("span",{className:"font-medium",children:["₹ ",r.amount.toLocaleString()]})]}),f.jsxs("div",{className:"mb-2",children:["Status: ",f.jsx("span",{className:"font-medium",children:r.status})]}),f.jsxs("div",{className:"mb-2",children:["Date: ",f.jsx("span",{className:"font-medium",children:r.date})]})]}),f.jsxs("div",{className:"mt-6 flex gap-2",children:[f.jsx("button",{onClick:()=>h([r],`record_${r.id}.csv`),className:"px-3 py-2 rounded-lg bg-indigo-600 text-white text-sm",children:"Export"}),f.jsx("button",{onClick:()=>d(null),className:"px-3 py-2 rounded-lg bg-slate-100 text-slate-700 text-sm",children:"Close"})]})]})})]})]})}function Te(){return f.jsxs(r,{children:[f.jsx(d,{path:"/",element:f.jsx(i,{to:"/signup",replace:!0})}),f.jsx(d,{path:"/signup",element:f.jsx(M,{})}),f.jsx(d,{path:"/login",element:f.jsx(B,{})}),f.jsx(d,{path:"/factory/company-owner",element:f.jsx($,{children:f.jsx(H,{})})}),f.jsx(d,{path:"/factory/admin",element:f.jsx($,{children:f.jsx(W,{})})}),f.jsx(d,{path:"/shipper/company-owner",element:f.jsx($,{children:f.jsx(z,{})})}),f.jsx(d,{path:"/shipper/admin",element:f.jsx($,{children:f.jsx(X,{})})}),f.jsx(d,{path:"/shipper/documentation",element:f.jsx($,{children:f.jsx(te,{})})}),f.jsx(d,{path:"/shipper/accounts",element:f.jsx($,{children:f.jsx(ne,{})})}),f.jsx(d,{path:"/transporter/company-owner",element:f.jsx($,{children:f.jsx(xe,{})})}),f.jsx(d,{path:"/transporter/admin",element:f.jsx($,{children:f.jsx(ge,{})})}),f.jsx(d,{path:"/transporter/truck-driver",element:f.jsx($,{children:f.jsx(je,{})})}),f.jsx(d,{path:"/clearance-agents/company-owner",element:f.jsx($,{children:f.jsx(ye,{})})}),f.jsx(d,{path:"/clearance-agents/admin",element:f.jsx($,{children:f.jsx(ke,{})})}),f.jsx(d,{path:"/clearance-agents/documentation",element:f.jsx($,{children:f.jsx(Oe,{})})}),f.jsx(d,{path:"/clearance-agents/accounts",element:f.jsx($,{children:f.jsx(Ie,{})})})]})}v.createRoot(document.getElementById("root")).render(f.jsx(c.StrictMode,{children:f.jsx(o,{children:f.jsx(E,{children:f.jsx(Te,{})})})}));
